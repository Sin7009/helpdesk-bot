# üéì Omnichannel Helpdesk Bot

–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–ª—è Telegram –∏ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
–ë–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –µ–¥–∏–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –Ω–∏—Ö –ø—Ä—è–º–æ –∏–∑ Telegram.

![Status](https://img.shields.io/badge/status-active-success.svg)
![Python](https://img.shields.io/badge/Python-3.12-blue.svg)
![Stack](https://img.shields.io/badge/aiogram-vkbottle-sqlalchemy-green)

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **–û–º–Ω–∏–∫–∞–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** –°—Ç—É–¥–µ–Ω—Ç—ã –ø–∏—à—É—Ç —Ç–∞–º, –≥–¥–µ –∏–º —É–¥–æ–±–Ω–æ (TG –∏–ª–∏ VK).
* **–£–º–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞:** –°–æ–æ–±—â–µ–Ω–∏—è —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ "–¢–∏–∫–µ—Ç—ã". –ï—Å–ª–∏ —É —Å—Ç—É–¥–µ–Ω—Ç–∞ —É–∂–µ –µ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞—è –∑–∞—è–≤–∫–∞, –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –Ω–µ–π, –∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç –¥—É–±–ª–∏.
* **–ï–¥–∏–Ω–∞—è –±–∞–∑–∞:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SQLite (–ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ PostgreSQL).
* **–ê–¥–º–∏–Ω–∫–∞ –≤ Telegram:** –û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥–æ–π `/reply`, –Ω–µ –≤—ã—Ö–æ–¥—è –∏–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞.
* **–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏:** –ü–æ–ª–Ω—ã–π –ª–æ–≥ –¥–∏–∞–ª–æ–≥–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î.

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

* **–Ø–∑—ã–∫:** Python 3.12+
* **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞–º–∏:** `uv` (Astral)
* **Telegram:** `aiogram 3.x`
* **VK:** `vkbottle`
* **ORM:** `SQLAlchemy` (AsyncIO) + `aiosqlite`
* **–î–µ–ø–ª–æ–π:** GitHub Actions + Systemd

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ (–õ–æ–∫–∞–ª—å–Ω–æ)

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [uv](https://github.com/astral-sh/uv):
```bash
curl -LsSf [https://astral.sh/uv/install.sh](https://astral.sh/uv/install.sh) | sh
````

### 2\. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone <URL_—Ç–≤–æ–µ–≥–æ_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd helpdesk-bot

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (uv —Å–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å–∞–º)
uv sync
```

### 3\. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```bash
cp .env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```ini
TG_TOKEN=123456:ABC-DEF...       # –¢–æ–∫–µ–Ω –æ—Ç @BotFather
VK_TOKEN=vk1.a.Ew...             # –ö–ª—é—á —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ VK
TG_ADMIN_ID=123456789            # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ Telegram
DB_NAME=support.db               # –ò–º—è —Ñ–∞–π–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
LOG_LEVEL=INFO
```

### 4\. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã:

```bash
uv run python init_db_script.py
```

### 5\. –ó–∞–ø—É—Å–∫

```bash
uv run python main.py
```

## üñ• –ö–æ–º–∞–Ω–¥—ã –ê–¥–º–∏–Ω–∞

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (—á–µ–π ID —É–∫–∞–∑–∞–Ω –≤ `.env`) –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ Telegram:

  * `/reply <ID_—Ç–∏–∫–µ—Ç–∞> <–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞>` ‚Äî –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç—É.
      * *–ü—Ä–∏–º–µ—Ä:* `/reply 5 –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –°–ø—Ä–∞–≤–∫–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∑–∞–≤—Ç—Ä–∞.`
      * –ë–æ—Ç —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç, –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç (–≤ TG –∏–ª–∏ VK), –∏ –∑–∞–∫—Ä–æ–µ—Ç —Ç–∏–∫–µ—Ç.

## üåê –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Debian 12)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ **GitHub Actions**.

1.  **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:**

      * –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `/home/sin7009/helpdesk-bot`.
      * –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –±–æ–µ–≤—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –ø–∞–ø–∫–∏.
      * –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å `support-bot.service` (—Ñ–∞–π–ª –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏).

2.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub:**
    –î–æ–±–∞–≤—å—Ç–µ –≤ Secrets —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

      * `HOST`: IP —Å–µ—Ä–≤–µ—Ä–∞.
      * `USERNAME`: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sin7009`).
      * `SSH_KEY`: –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH-–∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É.

3.  **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
    –õ—é–±–æ–π `git push` –≤ –≤–µ—Ç–∫—É `main` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ core/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ª–æ–≥–≥–µ—Ä
‚îú‚îÄ‚îÄ database/           # –ú–æ–¥–µ–ª–∏ (SQLAlchemy) –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î
‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (telegram.py, vk.py)
‚îú‚îÄ‚îÄ services/           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îú‚îÄ‚îÄ .github/            # CI/CD (GitHub Actions)
‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∑–∞–ø—É—Å–∫ –¥–≤—É—Ö –±–æ—Ç–æ–≤)
‚îú‚îÄ‚îÄ pyproject.toml      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ support-bot.service # –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è Systemd
```
