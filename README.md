<div align="center">

# ๐ Telegram Support Bot

[![CI Status](https://github.com/Sin7009/helpdesk-bot/workflows/CI/badge.svg)](https://github.com/Sin7009/helpdesk-bot/actions)
[![Docker](https://github.com/Sin7009/helpdesk-bot/workflows/Docker/badge.svg)](https://github.com/Sin7009/helpdesk-bot/pkgs/container/helpdesk-bot)
[![Python 3.12](https://img.shields.io/badge/python-3.12-blue.svg)](https://www.python.org/downloads/release/python-3120/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![codecov](https://codecov.io/gh/Sin7009/helpdesk-bot/branch/main/graph/badge.svg)](https://codecov.io/gh/Sin7009/helpdesk-bot)

**ะกะพะฒัะตะผะตะฝะฝัะน ะฑะพั ัะตัะฝะธัะตัะบะพะน ะฟะพะดะดะตัะถะบะธ ะดะปั ัะฝะธะฒะตััะธัะตัะพะฒ ะธ ะพัะณะฐะฝะธะทะฐัะธะน**

[๐ ะัััััะน ััะฐัั](#-ะฑัััััะน-ััะฐัั) โข [๐ ะะพะบัะผะตะฝัะฐัะธั](#-ัะพะดะตัะถะฐะฝะธะต) โข [๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั](CONTRIBUTING.md)

</div>

---

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [๐ ะะพะทะผะพะถะฝะพััะธ](#-ะฒะพะทะผะพะถะฝะพััะธ)
- [๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ](#-ัะตัะฝะพะปะพะณะธัะตัะบะธะน-ััะตะบ)
- [๐ ะัััััะน ััะฐัั](#-ะฑัััััะน-ััะฐัั)
- [โ๏ธ ะะพะฝัะธะณััะฐัะธั](#๏ธ-ะบะพะฝัะธะณััะฐัะธั)
- [๐ ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ](#-ะฐััะธัะตะบัััะฐ-ะฟัะพะตะบัะฐ)
- [๐ฏ ะะพะผะฐะฝะดั ะฑะพัะฐ](#-ะบะพะผะฐะฝะดั-ะฑะพัะฐ)
- [๐ ะคัะฝะบัะธะธ ะดะปั ัะฝะธะฒะตััะธัะตัะพะฒ](#-ััะฝะบัะธะธ-ะดะปั-ัะฝะธะฒะตััะธัะตัะพะฒ)
- [๐ค AI/LLM ะธะฝัะตะณัะฐัะธั](#-aillm-ะธะฝัะตะณัะฐัะธั)
- [๐ ะกัะฐัะธััะธะบะฐ ะธ ะผะตััะธะบะธ](#-ััะฐัะธััะธะบะฐ-ะธ-ะผะตััะธะบะธ)
- [๐ ะะฐะทะฐ ะดะฐะฝะฝัั ะธ ะผะธะณัะฐัะธะธ](#-ะฑะฐะทะฐ-ะดะฐะฝะฝัั-ะธ-ะผะธะณัะฐัะธะธ)
- [๐งช ะะฐะทัะฐะฑะพัะบะฐ ะธ ัะตััะธัะพะฒะฐะฝะธะต](#-ัะฐะทัะฐะฑะพัะบะฐ-ะธ-ัะตััะธัะพะฒะฐะฝะธะต)
- [โก ะกััะตัั-ัะตััะธัะพะฒะฐะฝะธะต](#-ัััะตัั-ัะตััะธัะพะฒะฐะฝะธะต)
- [๐ณ Docker ะธ ะดะตะฟะปะพะน](#-docker-ะธ-ะดะตะฟะปะพะน)
- [๐ ะะตะทะพะฟะฐัะฝะพััั](#-ะฑะตะทะพะฟะฐัะฝะพััั)
- [โ FAQ ะธ Troubleshooting](#-faq-ะธ-troubleshooting)
- [๐บ Roadmap](#-roadmap)
- [๐ ะะพะบัะผะตะฝัะฐัะธั](#-ะดะพะบัะผะตะฝัะฐัะธั)

---

## ๐ ะะพะทะผะพะถะฝะพััะธ

### ๐ ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั

```mermaid
graph TB
    A[๐จโ๐ ะกััะดะตะฝั ะฟะธัะตั ะฒ ะฑะพัะฐ] --> B{FAQ ัะธััะตะผะฐ}
    B -->|ะะฐะนะดะตะฝ ะพัะฒะตั| C[๐ค ะะฒัะพะพัะฒะตั ะธะท FAQ]
    B -->|ะะต ะฝะฐะนะดะตะฝ| D[๐ ะกะพะทะดะฐะฝะธะต ัะธะบะตัะฐ]
    D --> E[๐ค AI ะพะฟัะตะดะตะปัะตั ะฟัะธะพัะธัะตั]
    E --> F[๐ข ะฃะฒะตะดะพะผะปะตะฝะธะต ะฒ ะณััะฟะฟั ะฟะพะดะดะตัะถะบะธ]
    F --> G[๐จโ๐ผ ะะดะผะธะฝะธัััะฐัะพั ะพัะฒะตัะฐะตั]
    G --> H[๐ฌ ะะธะฐะปะพะณ ัััะดะตะฝั โ ะฟะพะดะดะตัะถะบะฐ]
    H --> I[โ ะะฐะบัััะธะต ัะธะบะตัะฐ]
    I --> J[๐ค AI ะณะตะฝะตัะธััะตั ัะตะทัะผะต]
    J --> K[โญ ะกััะดะตะฝั ััะฐะฒะธั ะพัะตะฝะบั]
    K --> L[๐ ะกัะฐัะธััะธะบะฐ ะพะฑะฝะพะฒะปัะตััั]
```

### ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| ๐ **ะขะธะบะตั-ัะธััะตะผะฐ** | ะกะพะทะดะฐะฝะธะต, ะพััะปะตะถะธะฒะฐะฝะธะต ะธ ัะฟัะฐะฒะปะตะฝะธะต ะทะฐัะฒะบะฐะผะธ ั ัะฝะธะบะฐะปัะฝัะผะธ ID |
| ๐ **ะะฐัะตะณะพัะธะธ** | ะะธะฑะบะฐั ัะธััะตะผะฐ ะบะฐัะตะณะพัะธะน (ะฃัะตะฑะฐ, IT, ะะฑัะตะถะธัะธะต ะธ ะดั.) |
| ๐ฌ **ะะธะฐะปะพะณะธ** | ะะฒัััะพัะพะฝะฝะธะน ัะฐั ะผะตะถะดั ัััะดะตะฝัะพะผ ะธ ะฟะพะดะดะตัะถะบะพะน |
| ๐ **ะะตะดะธะฐ-ัะฐะนะปั** | ะะพะดะดะตัะถะบะฐ ัะพัะพ ะธ ะดะพะบัะผะตะฝัะพะฒ ะฒ ะทะฐัะฒะบะฐั |
| ๐ **ะะฝะฐะปะธัะธะบะฐ** | ะะถะตะดะฝะตะฒะฝะฐั ััะฐัะธััะธะบะฐ ั ะผะตััะธะบะฐะผะธ |
| ๐ **ะฃะฒะตะดะพะผะปะตะฝะธั** | Real-time ะพะฟะพะฒะตัะตะฝะธั ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ |

### ะฃะฝะธะฒะตััะธัะตััะบะธะต ััะฝะบัะธะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| ๐ด **ะัะธะพัะธัะตัั** | ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต ััะพัะฝะพััะธ ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ |
| ๐ค **ะัะพัะธะปั ัััะดะตะฝัะฐ** | ะััั, ะณััะฟะฟะฐ, ัะฐะบัะปััะตั, ััะฐััั ััะฐัะพััั |
| โฑ **SLA ะผะตััะธะบะธ** | ะััะปะตะถะธะฒะฐะฝะธะต ะฒัะตะผะตะฝะธ ะฟะตัะฒะพะณะพ ะพัะฒะตัะฐ |
| โญ **ะัะตะฝะบะฐ ะบะฐัะตััะฒะฐ** | ะกะธััะตะผะฐ ัะตะนัะธะฝะณะฐ 1-5 ะทะฒะตะทะด ะฟะพัะปะต ะทะฐะบัััะธั |
| ๐ **ะะฐััะธัะตะฝะฝะฐั ััะฐัะธััะธะบะฐ** | ะัะธะพัะธัะตัั, SLA, ััะตะดะฝะธะน ัะตะนัะธะฝะณ |

### AI/LLM ะฒะพะทะผะพะถะฝะพััะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| ๐ **ะะฒัะพ-ัะตะทัะผะต** | ะะตะฝะตัะฐัะธั ะบัะฐัะบะพะณะพ ะธัะพะณะฐ ะดะธะฐะปะพะณะฐ ะฟัะธ ะทะฐะบัััะธะธ ัะธะบะตัะฐ |
| ๐ง **ะะฝะฐะปะธะท ััะตะฝะดะพะฒ** | ะะถะตะฝะตะดะตะปัะฝัะน AI-ะฐะฝะฐะปะธะท ัะฐัััั ะฟัะพะฑะปะตะผ ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั FAQ |
| ๐ก **ะฃะผะฝัะต ะฟะพะดัะบะฐะทะบะธ** | FAQ-ัะธััะตะผะฐ ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผะธ ะพัะฒะตัะฐะผะธ |

---

## ๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

<table>
<tr>
<td><strong>ะะฐัะตะณะพัะธั</strong></td>
<td><strong>ะขะตัะฝะพะปะพะณะธั</strong></td>
<td><strong>ะะตััะธั</strong></td>
</tr>
<tr><td>๐ ะฏะทัะบ</td><td><a href="https://python.org">Python</a></td><td>3.12</td></tr>
<tr><td>๐ค Telegram API</td><td><a href="https://github.com/aiogram/aiogram">aiogram</a></td><td>3.22+</td></tr>
<tr><td>๐ ORM</td><td><a href="https://sqlalchemy.org">SQLAlchemy</a></td><td>2.0 (Async)</td></tr>
<tr><td>๐พ ะะฐะทะฐ ะดะฐะฝะฝัั</td><td><a href="https://sqlite.org">SQLite</a> / <a href="https://www.postgresql.org">PostgreSQL</a></td><td>16+</td></tr>
<tr><td>๐ ะะธะณัะฐัะธะธ</td><td><a href="https://alembic.sqlalchemy.org">Alembic</a></td><td>1.17+</td></tr>
<tr><td>โ๏ธ ะะพะฝัะธะณััะฐัะธั</td><td><a href="https://docs.pydantic.dev/latest/concepts/pydantic_settings/">Pydantic Settings</a></td><td>2.12+</td></tr>
<tr><td>โฐ ะะปะฐะฝะธัะพะฒัะธะบ</td><td><a href="https://apscheduler.readthedocs.io">APScheduler</a></td><td>3.11+</td></tr>
<tr><td>๐ค LLM</td><td><a href="https://openrouter.ai">OpenRouter API</a> (Gemini Flash)</td><td>-</td></tr>
<tr><td>๐ฑ Mini App</td><td><a href="https://docs.aiohttp.org">aiohttp</a></td><td>3.9+</td></tr>
<tr><td>๐ฆ ะะตะฝะตะดะถะตั ะฟะฐะบะตัะพะฒ</td><td><a href="https://github.com/astral-sh/uv">uv</a></td><td>latest</td></tr>
<tr><td>๐งช ะขะตััะธัะพะฒะฐะฝะธะต</td><td><a href="https://pytest.org">pytest</a> + pytest-asyncio</td><td>9.0+</td></tr>
<tr><td>๐ณ ะะพะฝัะตะนะฝะตัะธะทะฐัะธั</td><td><a href="https://docker.com">Docker</a> + Docker Compose</td><td>-</td></tr>
<tr><td>๐ CI/CD</td><td><a href="https://github.com/features/actions">GitHub Actions</a></td><td>-</td></tr>
</table>

---

## ๐ ะัััััะน ััะฐัั

### ะจะฐะณ 1: ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone https://github.com/Sin7009/helpdesk-bot.git
cd helpdesk-bot
```

### ะจะฐะณ 2: ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

```bash
cp .env.example .env
```

ะััะตะดะฐะบัะธััะนัะต `.env` ัะฐะนะป (ะฟะพะปััะธัั ัะพะบะตะฝ ะผะพะถะฝะพ ั [@BotFather](https://t.me/BotFather)):

```ini
# ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต
TG_BOT_TOKEN=ะฒะฐั_ัะพะบะตะฝ_ัะตะปะตะณัะฐะผ
TG_ADMIN_ID=123456789           # ะะฐั Telegram ID
TG_STAFF_CHAT_ID=-100123456789  # ID ะณััะฟะฟั ะดะปั ะพะฑัะฐะฑะพัะบะธ ะทะฐัะฒะพะบ

# ะะฟัะธะพะฝะฐะปัะฝัะต
OPENROUTER_API_KEY=sk-or-v1-... # ะะปั AI-ััะฝะบัะธะน (ัะตะทัะผะต, ะฐะฝะฐะปะธะท)
LLM_MODEL_NAME=google/gemini-3-flash-preview
DB_NAME=/app/data/support.db    # ะััั ะบ ะะ (ะดะปั Docker)
```

### ะจะฐะณ 3: ะะฐะฟััะบ

#### ๐ณ ะะฐัะธะฐะฝั A: Docker (ะะตะบะพะผะตะฝะดัะตััั)

```bash
docker-compose up -d --build
```

ะะพัะผะพััะตัั ะปะพะณะธ:
```bash
docker-compose logs -f
```

#### ๐ ะะฐัะธะฐะฝั B: ะะพะบะฐะปัะฝะพ ั uv (ะะปั ัะฐะทัะฐะฑะพัะบะธ)

```bash
# ะฃััะฐะฝะพะฒะบะฐ uv (ะตัะปะธ ะฝะต ัััะฐะฝะพะฒะปะตะฝ)
curl -LsSf https://astral.sh/uv/install.sh | sh

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
uv sync --all-extras --dev

# ะะฐะฟััะบ ะฑะพัะฐ
python main.py
```

#### ๐ ะะฐัะธะฐะฝั C: ะะพะบะฐะปัะฝะพ ั pip

```bash
# ะกะพะทะดะฐะฝะธะต ะฒะธัััะฐะปัะฝะพะณะพ ะพะบััะถะตะฝะธั
python3.12 -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install .

# ะะฐะฟััะบ ะฑะพัะฐ
python main.py
```

---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

| ะะตัะตะผะตะฝะฝะฐั | ะะฑัะทะฐัะตะปัะฝะฐั | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|------------|--------------|----------|--------|
| `TG_BOT_TOKEN` | โ | ะขะพะบะตะฝ ะฑะพัะฐ ะพั @BotFather | `123456:ABC-DEF...` |
| `TG_ADMIN_ID` | โ | Telegram ID ะณะปะฐะฒะฝะพะณะพ ะฐะดะผะธะฝะธัััะฐัะพัะฐ | `123456789` |
| `TG_STAFF_CHAT_ID` | โ | ID ะณััะฟะฟั ะดะปั ะพะฑัะฐะฑะพัะบะธ ะทะฐัะฒะพะบ | `-100123456789` |
| `DB_NAME` | โ | ะััั ะบ ัะฐะนะปั ะฑะฐะทั ะดะฐะฝะฝัั (SQLite) | `/app/data/support.db` |
| `DATABASE_URL` | โ | URL ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL | `postgresql+asyncpg://user:pass@host:5432/db` |
| `OPENROUTER_API_KEY` | โ | API ะบะปัั OpenRouter ะดะปั LLM | `sk-or-v1-...` |
| `LLM_MODEL_NAME` | โ | ะะพะดะตะปั LLM ะดะปั ะณะตะฝะตัะฐัะธะธ | `google/gemini-3-flash-preview` |
| `SUPPORT_HOURS_START` | โ | ะะฐัะฐะปะพ ัะฐะฑะพัะตะณะพ ะดะฝั (ัะฐัั) | `9` |
| `SUPPORT_HOURS_END` | โ | ะะพะฝะตั ัะฐะฑะพัะตะณะพ ะดะฝั (ัะฐัั) | `18` |
| `SUPPORT_TIMEZONE` | โ | ะัะตะผะตะฝะฝะฐั ะทะพะฝะฐ ะฟะพะดะดะตัะถะบะธ | `Europe/Moscow` |
| `ENABLE_WORKING_HOURS` | โ | ะะบะปััะธัั ะฟัะพะฒะตัะบั ัะฐะฑะพัะตะณะพ ะฒัะตะผะตะฝะธ | `True` |
| `STALE_TICKET_HOURS` | โ | ะงะฐัะพะฒ ะดะพ ะฝะฐะฟะพะผะธะฝะฐะฝะธั ะพ ะทะฐัะฒะบะต | `4` |
| `REMINDER_INTERVAL_MINUTES` | โ | ะะฝัะตัะฒะฐะป ะฟัะพะฒะตัะบะธ ััะฐััั ะทะฐัะฒะพะบ | `60` |
| `WEBAPP_HOST` | โ | ะฅะพัั ะดะปั ะทะฐะฟััะบะฐ Mini App | `0.0.0.0` |
| `WEBAPP_PORT` | โ | ะะพัั ะดะปั Mini App ัะตัะฒะตัะฐ | `8080` |
| `WEBAPP_URL` | โ | URL Mini App ะดะปั ะบะฝะพะฟะบะธ ะฒ ะฑะพัะต | `https://your-domain.com` |

> **๐ก ะัะธะผะตัะฐะฝะธะต:** ะัะปะธ ัััะฐะฝะพะฒะปะตะฝ `DATABASE_URL`, ะพะฝ ะธัะฟะพะปัะทัะตััั ะฒะผะตััะพ `DB_NAME`. ะญัะพ ะฟะพะทะฒะพะปัะตั ะปะตะณะบะพ ะฟะตัะตะบะปััะฐัััั ะผะตะถะดั SQLite ะธ PostgreSQL.

### ะะฐะบ ะฟะพะปััะธัั ID ัะฐัะฐ

1. ะกะพะทะดะฐะนัะต ะณััะฟะฟั ะฒ Telegram
2. ะะพะฑะฐะฒััะต ะฑะพัะฐ [@RawDataBot](https://t.me/RawDataBot) ะฒ ะณััะฟะฟั
3. ะะฝ ะฟะพะบะฐะถะตั `chat_id` ะณััะฟะฟั (ะดะปั ััะฟะตัะณััะฟะฟ ะฝะฐัะธะฝะฐะตััั ั `-100`)
4. ะฃะดะฐะปะธัะต @RawDataBot ะธ ะดะพะฑะฐะฒััะต ะฒะฐัะตะณะพ ะฑะพัะฐ

---

## ๐ ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ

```
helpdesk-bot/
โโโ ๐ core/                    # ะฏะดัะพ ะฟัะธะปะพะถะตะฝะธั
โ   โโโ config.py              # Pydantic Settings ะบะพะฝัะธะณััะฐัะธั
โ   โโโ constants.py           # ะะพะฝััะฐะฝัั ะธ ัะพัะผะฐัะธัะพะฒะฐะฝะธะต
โ   โโโ logger.py              # ะะฐัััะพะนะบะฐ ะปะพะณะธัะพะฒะฐะฝะธั
โ
โโโ ๐ database/                # ะกะปะพะน ะฑะฐะทั ะดะฐะฝะฝัั
โ   โโโ models.py              # SQLAlchemy 2.0 ะผะพะดะตะปะธ
โ   โโโ setup.py               # ะะฝะธัะธะฐะปะธะทะฐัะธั ะะ ะธ ัะตััะธะธ
โ   โโโ ๐ repositories/       # ะะฐััะตัะฝ Repository
โ       โโโ base.py            # ะะฐะทะพะฒัะน ัะตะฟะพะทะธัะพัะธะน
โ       โโโ user_repository.py
โ       โโโ ticket_repository.py
โ       โโโ category_repository.py
โ
โโโ ๐ handlers/                # ะะฑัะฐะฑะพััะธะบะธ Telegram
โ   โโโ telegram.py            # ะฅะตะฝะดะปะตัั ะดะปั ัััะดะตะฝัะพะฒ
โ   โโโ admin.py               # ะฅะตะฝะดะปะตัั ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ
โ
โโโ ๐ services/                # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โโโ ticket_service.py      # ะะพะณะธะบะฐ ัะธะบะตัะพะฒ
โ   โโโ user_service.py        # ะะพะณะธะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โโโ faq_service.py         # FAQ ั ะบััะธัะพะฒะฐะฝะธะตะผ
โ   โโโ priority_service.py    # ะะฟัะตะดะตะปะตะฝะธะต ะฟัะธะพัะธัะตัะพะฒ
โ   โโโ llm_service.py         # AI/LLM ะธะฝัะตะณัะฐัะธั
โ   โโโ scheduler.py           # APScheduler ะทะฐะดะฐัะธ
โ
โโโ ๐ middlewares/             # Middleware aiogram
โ   โโโ db.py                  # ะะฝัะตะบัะธั ัะตััะธะธ ะะ
โ
โโโ ๐ alembic/                 # ะะธะณัะฐัะธะธ Alembic
โ   โโโ env.py
โ   โโโ ๐ versions/           # ะคะฐะนะปั ะผะธะณัะฐัะธะน
โ
โโโ ๐ tests/                   # ะขะตััั pytest (70+ ัะตััะพะฒ)
โ   โโโ conftest.py            # ะคะธะบััััั
โ   โโโ test_services.py
โ   โโโ test_handlers.py
โ   โโโ ...
โ
โโโ ๐ main.py                  # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ ๐ pyproject.toml           # ะะพะฝัะธะณััะฐัะธั ะฟัะพะตะบัะฐ
โโโ ๐ docker-compose.yml       # Docker ะบะพะฝัะธะณััะฐัะธั
โโโ ๐ Dockerfile               # Multi-stage Docker ะพะฑัะฐะท
โโโ ๐ alembic.ini              # ะะพะฝัะธะณััะฐัะธั Alembic
```

### ะกะปะพะธ ะฟัะธะปะพะถะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    Handlers Layer                        โ
โ         (telegram.py, admin.py - ะพะฑัะฐะฑะพัะบะฐ ะบะพะผะฐะฝะด)      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                    Services Layer                        โ
โ   (ticket_service, user_service, llm_service ะธ ะดั.)     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                   Repository Layer                       โ
โ    (user_repository, ticket_repository ะธ ะดั.)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                    Models Layer                          โ
โ        (SQLAlchemy models - User, Ticket, etc.)         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                    Database Layer                        โ
โ              (SQLite + aiosqlite, Alembic)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฏ ะะพะผะฐะฝะดั ะฑะพัะฐ

### ๐จโ๐ ะะปั ัััะดะตะฝัะพะฒ

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `/start` | ะะฐัะฐัั ัะฐะฑะพัั ั ะฑะพัะพะผ, ัะตะณะธัััะฐัะธั, ะฒัะฑะพั ัะตะผั ะพะฑัะฐัะตะฝะธั |
| `/myprofile` | ะะพัะผะพััะตัั ัะฒะพะน ะฟัะพัะธะปั (ะบััั, ะณััะฟะฟะฐ, ัะฐะบัะปััะตั) |
| `/updateprofile` | ะะฑะฝะพะฒะธัั ะธะฝัะพัะผะฐัะธั ะฟัะพัะธะปั |

### ๐จโ๐ผ ะะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `/admin` | ะัะบัััั ะฟะฐะฝะตะปั ัะฟัะฐะฒะปะตะฝะธั (WebApp) |
| `/reply ID ัะตะบัั` | ะัะฒะตัะธัั ะฝะฐ ะทะฐัะฒะบั ะฟะพ ID |
| `/close ID` | ะะฐะบัััั ะทะฐัะฒะบั (ั ะณะตะฝะตัะฐัะธะตะน ัะตะทัะผะต) |
| `/assign ID @user` | ะะฐะทะฝะฐัะธัั ะพัะฒะตัััะฒะตะฝะฝะพะณะพ ะทะฐ ัะธะบะตั |
| `/export [ะดะฝะธ]` | ะญะบัะฟะพัั ััะฐัะธััะธะบะธ ะฒ CSV |
| `/add_category ะฝะฐะทะฒะฐะฝะธะต` | ะะพะฑะฐะฒะธัั ะฝะพะฒัั ะบะฐัะตะณะพัะธั |

> **๐ก ะกะพะฒะตั:** ะะผะตััะพ ะบะพะผะฐะฝะด ะผะพะถะฝะพ ะฟัะพััะพ ะพัะฒะตัะฐัั ะฝะฐ ัะพะพะฑัะตะฝะธะต ะฑะพัะฐ ะฒ ะณััะฟะฟะต (Reply) โ ััะพ ัะฐะผัะน ัะดะพะฑะฝัะน ัะฟะพัะพะฑ!

### ๐ฑ ะะฝัะตัะฐะบัะธะฒะฝัะต ัะปะตะผะตะฝัั

- **๐ ะัะฑะพั ะบะฐัะตะณะพัะธะธ** โ ะบะฝะพะฟะบะธ ะดะปั ะฒัะฑะพัะฐ ัะตะผั (ะฃัะตะฑะฐ, IT, ะกะฟัะฐะฒะบะธ, ะะฑัะตะถะธัะธะต)
- **โ FAQ** โ ะฑัััััะน ะดะพัััะฟ ะบ ัะฐัััะผ ะฒะพะฟัะพัะฐะผ
- **๐ ะะพะธ ะทะฐัะฒะบะธ** โ ะฟัะพัะผะพัั ะธััะพัะธะธ ะพะฑัะฐัะตะฝะธะน
- **โญ ะัะตะฝะบะฐ ะบะฐัะตััะฒะฐ** โ ะบะฝะพะฟะบะธ 1-5 ะทะฒะตะทะด ะฟะพัะปะต ะทะฐะบัััะธั ะทะฐัะฒะบะธ

---

## ๐ ะคัะฝะบัะธะธ ะดะปั ัะฝะธะฒะตััะธัะตัะพะฒ

### ๐ด ะกะธััะตะผะฐ ะฟัะธะพัะธัะตัะพะฒ

ะะพั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฟัะตะดะตะปัะตั ะฟัะธะพัะธัะตั ะทะฐัะฒะบะธ ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ:

| ะัะธะพัะธัะตั | ะญะผะพะดะทะธ | ะะปััะตะฒัะต ัะปะพะฒะฐ |
|-----------|--------|----------------|
| **ะกัะพัะฝะพ** | ๐ด | ััะพัะฝะพ, ัะบะทะฐะผะตะฝ, ะทะฐะฒััะฐ, ัะตะณะพะดะฝั, ะฝะต ะผะพะณั ะฒะพะนัะธ, ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ, ัะตััะธั, ะพััะธัะปะตะฝะธะต |
| **ะััะพะบะธะน** | ๐ | ะฒะฐะถะฝะพ, ะฟัะพะฑะปะตะผะฐ ั ะพัะตะฝะบะฐะผะธ, ะพัะธะฑะบะฐ ะฒ ัะฐัะฟะธัะฐะฝะธะธ, ะดะธะฟะปะพะผะฝะฐั ัะฐะฑะพัะฐ, deadline |
| **ะะฑััะฝัะน** | ๐ข | ะะพ ัะผะพะปัะฐะฝะธั ะดะปั ะฒัะตั ะพััะฐะปัะฝัั |
| **ะะธะทะบะธะน** | โช | ะบะพะณะดะฐ ะฑัะดะตั, ัะพัะตะป ะฑั ัะทะฝะฐัั, ะผะพะถะฝะพ ัะทะฝะฐัั, ะฟะพะดัะบะฐะถะธัะต ะฟะพะถะฐะปัะนััะฐ |

**ะัะธะผะตั ะพะฟัะตะดะตะปะตะฝะธั:**
```
ะกััะดะตะฝั: "ะกะะะงะะ! ะะต ะผะพะณั ะฒะพะนัะธ ะฒ ะปะธัะฝัะน ะบะฐะฑะธะฝะตั, ะทะฐะฒััะฐ ัะบะทะฐะผะตะฝ!"

ะะพั ะพะฟัะตะดะตะปัะตั: ๐ด ะกะะะงะะ (ะบะปััะตะฒัะต ัะปะพะฒะฐ: "ััะพัะฝะพ", "ะทะฐะฒััะฐ", "ัะบะทะฐะผะตะฝ")
```

### ๐ ะัะพัะธะปั ัััะดะตะฝัะฐ

ะัะธ ะฟะตัะฒะพะผ ะพะฑัะฐัะตะฝะธะธ ะฑะพั ะทะฐะฟัะฐัะธะฒะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ัััะดะตะฝัะต:

1. **ะััั** (1-6) โ ะฒัะฑะพั ะบะฝะพะฟะบะฐะผะธ
2. **ะััะฟะฟะฐ** โ ัะตะบััะพะฒัะน ะฒะฒะพะด (ะฝะฐะฟัะธะผะตั, ะะะข-201)
3. **ะกัะฐััั** โ ัััะดะตะฝั ะธะปะธ ััะฐัะพััะฐ

ะะดะผะธะฝะธัััะฐัะพัั ะฒะธะดัั ะบะพะฝัะตะบัั ะฒ ะบะฐะถะดะพะน ะทะฐัะฒะบะต:
```
๐ด ะะพะฒัะน ะทะฐะฟัะพั โ5 (ID: #123)
๐ค ะะฒะฐะฝ ะะตััะพะฒ
๐ โญ ะกะขะะะะกะขะ | 3 ะบััั | ะััะฟะฟะฐ ะะะข-201 | ะคะะข
ะขะตะผะฐ: IT | ะัะธะพัะธัะตั: ะกัะพัะฝะพ
ะขะตะบัั: ะะต ะผะพะณั ะฒะพะนัะธ ะฒ ะปะธัะฝัะน ะบะฐะฑะธะฝะตั...
```

### ๐ธ ะัะธะผะตั ัะฐะฑะพัั ะฑะพัะฐ

<details>
<summary><b>ะะฐะถะผะธัะต, ััะพะฑั ัะฒะธะดะตัั ะฟัะธะผะตัั ะธะฝัะตััะตะนัะฐ</b></summary>

**1. ะกััะดะตะฝั ัะพะทะดะฐะตั ัะธะบะตั:**
```
๐ฑ Telegram (ัััะดะตะฝั):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะัะธะฒะตั, ะะฒะฐะฝ! ๐                    โ
โ ะัะฑะตัะธัะต ัะตะผั ะพะฑัะฐัะตะฝะธั:            โ
โ                                     โ
โ [๐ ะฃัะตะฑะฐ]    [๐ ะกะฟัะฐะฒะบะธ]         โ
โ [๐ป IT / ะะ]  [๐ ะะฑัะตะถะธัะธะต]       โ
โ [โ ะงะฐัััะต ะฒะพะฟัะพัั]                 โ
โ [๐ ะะพะธ ะทะฐัะฒะบะธ]                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**2. ะััะฟะฟะฐ ะฟะพะดะดะตัะถะบะธ ะฟะพะปััะฐะตั ัะฒะตะดะพะผะปะตะฝะธะต:**
```
๐ฌ Telegram (ะณััะฟะฟะฐ ะฟะพะดะดะตัะถะบะธ):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ด ะะพะฒัะน ะทะฐะฟัะพั โ5 (ID: #123)      โ
โ ๐ค ะะฒะฐะฝ ะะตััะพะฒ (@ivanov)           โ
โ ๐ โญ ะกะขะะะะกะขะ | 3 ะบััั | ะะะข-301  โ
โ ๐ ะขะตะผะฐ: IT                         โ
โ ๐ด ะัะธะพัะธัะตั: ะกัะพัะฝะพ                โ
โ                                     โ
โ ๐ฌ ะะพะฟัะพั:                          โ
โ ะกะะะงะะ! ะะต ะผะพะณั ะฒะพะนัะธ ะฒ ะปะธัะฝัะน      โ
โ ะบะฐะฑะธะฝะตั, ะทะฐะฒััะฐ ัะบะทะฐะผะตะฝ!            โ
โ                                     โ
โ โฑ ะกะพะทะดะฐะฝ: 23.12.2025 14:30         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**3. ะะดะผะธะฝะธัััะฐัะพั ะพัะฒะตัะฐะตั (Reply ะฝะฐ ัะพะพะฑัะตะฝะธะต):**
```
๐ฌ Telegram (ะณััะฟะฟะฐ ะฟะพะดะดะตัะถะบะธ):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โช๏ธ ะัะฒะตั ะฝะฐ: ะะพะฒัะน ะทะฐะฟัะพั โ5       โ
โ                                     โ
โ ะะพะฑััะน ะดะตะฝั! ะัะพะฒะตัััะต, ััะพ ะฒั      โ
โ ะธัะฟะพะปัะทัะตัะต ะฟัะฐะฒะธะปัะฝัะน ะปะพะณะธะฝ.       โ
โ ะะพะฟัะพะฑัะนัะต ะฒะพัััะฐะฝะพะฒะธัั ะฟะฐัะพะปั.     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ะัะฒะตั ะพัะฟัะฐะฒะปะตะฝ ัััะดะตะฝัั
โฑ SLA: ะะตัะฒัะน ะพัะฒะตั ะทะฐ 5 ะผะธะฝัั
```

**4. ะกััะดะตะฝั ะฟะพะปััะฐะตั ะพัะฒะตั:**
```
๐ฑ Telegram (ัััะดะตะฝั):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ฌ ะัะฒะตั ะพั ะฟะพะดะดะตัะถะบะธ:              โ
โ                                     โ
โ ะะพะฑััะน ะดะตะฝั! ะัะพะฒะตัััะต, ััะพ ะฒั      โ
โ ะธัะฟะพะปัะทัะตัะต ะฟัะฐะฒะธะปัะฝัะน ะปะพะณะธะฝ.       โ
โ ะะพะฟัะพะฑัะนัะต ะฒะพัััะฐะฝะพะฒะธัั ะฟะฐัะพะปั.     โ
โ                                     โ
โ ะะพะถะตัะต ะฟัะพะดะพะปะถะธัั ะดะธะฐะปะพะณ,           โ
โ ะฟัะพััะพ ะฝะฐะฟะธัะธัะต ััะดะฐ.               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**5. ะะพัะปะต ะทะฐะบัััะธั - ะพัะตะฝะบะฐ ะบะฐัะตััะฒะฐ:**
```
๐ฑ Telegram (ัััะดะตะฝั):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ะะฐั ะฒะพะฟัะพั ัะตัะตะฝ. ะะธะฐะปะพะณ ะทะฐะบััั. โ
โ                                     โ
โ ๐ ะัะพะณ:                            โ
โ ะกััะดะตะฝั ะฝะต ะผะพะณ ะฒะพะนัะธ ะฒ ะปะธัะฝัะน       โ
โ ะบะฐะฑะธะฝะตั. ะัะพะฑะปะตะผะฐ ัะตัะตะฝะฐ ะพัะฟัะฐะฒะบะพะน  โ
โ ะธะฝััััะบัะธะธ ะฟะพ ะฒะพัััะฐะฝะพะฒะปะตะฝะธั        โ
โ ะฟะฐัะพะปั.                             โ
โ                                     โ
โ ะะพะถะฐะปัะนััะฐ, ะพัะตะฝะธัะต ะบะฐัะตััะฒะพ:       โ
โ [โญ] [โญโญ] [โญโญโญ] [โญโญโญโญ] [โญโญโญโญโญ] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

</details>

### โญ ะัะตะฝะบะฐ ะบะฐัะตััะฒะฐ

ะะพัะปะต ะทะฐะบัััะธั ะทะฐัะฒะบะธ ัััะดะตะฝั ะฟะพะปััะฐะตั ะทะฐะฟัะพั ะฝะฐ ะพัะตะฝะบั:

```
โ ะะฐั ะฒะพะฟัะพั ัะตัะตะฝ. ะะธะฐะปะพะณ ะทะฐะบััั.

ะะพะถะฐะปัะนััะฐ, ะพัะตะฝะธัะต ะบะฐัะตััะฒะพ ะฟะพะผะพัะธ:
[โญ] [โญโญ] [โญโญโญ] [โญโญโญโญ] [โญโญโญโญโญ]
```

- ะัะตะฝะบะธ ัะพััะฐะฝััััั ะดะปั ััะฐัะธััะธะบะธ
- ะัะธ ะฝะธะทะบะพะน ะพัะตะฝะบะต (1-2) ะฐะดะผะธะฝะธัััะฐัะพั ะฟะพะปััะฐะตั ัะฒะตะดะพะผะปะตะฝะธะต
- ะกัะตะดะฝะธะน ัะตะนัะธะฝะณ ะพัะพะฑัะฐะถะฐะตััั ะฒ ะตะถะตะดะฝะตะฒะฝะพะผ ะพััะตัะต

---

## ๐ค AI/LLM ะธะฝัะตะณัะฐัะธั

ะะพั ะธัะฟะพะปัะทัะตั [OpenRouter API](https://openrouter.ai) ะดะปั ะธะฝัะตะณัะฐัะธะธ ั LLM (ะฟะพ ัะผะพะปัะฐะฝะธั Google Gemini Flash).

### ๐ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตะทัะผะต

ะัะธ ะทะฐะบัััะธะธ ัะธะบะตัะฐ LLM ะฐะฝะฐะปะธะทะธััะตั ะดะธะฐะปะพะณ ะธ ะณะตะฝะตัะธััะตั ะบัะฐัะบะพะต ัะตะทัะผะต:

```
๐ ะัะพะณ:
ะกััะดะตะฝั ะพะฑัะฐัะธะปัั ั ะฟัะพะฑะปะตะผะพะน ะฒัะพะดะฐ ะฒ ะปะธัะฝัะน ะบะฐะฑะธะฝะตั.
ะัะพะฑะปะตะผะฐ ะฑัะปะฐ ะฒ ะธััะตะบัะตะผ ััะพะบะต ะฟะฐัะพะปั.
ะััะปะฐะฝะฐ ะธะฝััััะบัะธั ะฟะพ ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะดะพัััะฟะฐ.
```

### ๐ง ะะถะตะฝะตะดะตะปัะฝัะน ะฐะฝะฐะปะธะท ััะตะฝะดะพะฒ

ะะฐะถะดะพะต ะฒะพัะบัะตัะตะฝัะต ะฒ 20:00 LLM ะฐะฝะฐะปะธะทะธััะตั ะทะฐะบััััะต ัะธะบะตัั ะธ ะฟัะตะดะปะฐะณะฐะตั ะพะฑะฝะพะฒะปะตะฝะธั FAQ:

```
๐ง ะะถะตะฝะตะดะตะปัะฝัะน AI-ะฐะฝะฐะปะธะท ะฟะพะดะดะตัะถะบะธ
ะัะพะฐะฝะฐะปะธะทะธัะพะฒะฐะฝะพ ัะธะบะตัะพะฒ: 47

ะัะพะฑะปะตะผะฐ: ะัะพะด ะฒ ะปะธัะฝัะน ะบะฐะฑะธะฝะตั (12 ัะปััะฐะตะฒ)
ะะตัะตะฝะธะต: ะะฝััััะบัะธั ะฟะพ ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ะฟะฐัะพะปั ัะตัะตะท email
ะะตะบะพะผะตะฝะดัะตะผะพะต ะดะตะนััะฒะธะต: ะะพะฑะฐะฒะธัั ะฒ ะฑะฐะทั ะทะฝะฐะฝะธะน
```

### โ๏ธ ะะฐัััะพะนะบะฐ LLM

```ini
# .env
OPENROUTER_API_KEY=sk-or-v1-ะฒะฐั_ะบะปัั
LLM_MODEL_NAME=google/gemini-3-flash-preview  # ะธะปะธ ะดััะณะฐั ะผะพะดะตะปั
```

> **๐ก ะัะธะผะตัะฐะฝะธะต:** LLM-ััะฝะบัะธะธ ะพะฟัะธะพะฝะฐะปัะฝั. ะะตะท API ะบะปััะฐ ะฑะพั ัะฐะฑะพัะฐะตั ะฟะพะปะฝะพัะตะฝะฝะพ, ะฝะพ ะฑะตะท ะณะตะฝะตัะฐัะธะธ ัะตะทัะผะต ะธ ะฐะฝะฐะปะธะทะฐ.

---

## ๐ ะกัะฐัะธััะธะบะฐ ะธ ะผะตััะธะบะธ

### ะะถะตะดะฝะตะฒะฝัะน ะพััะตั (23:59)

ะะฐะถะดัะน ะดะตะฝั ะฐะดะผะธะฝะธัััะฐัะพั ะฟะพะปััะฐะตั ะดะตัะฐะปัะฝัั ััะฐัะธััะธะบั:

```
๐ ะกัะฐัะธััะธะบะฐ ะทะฐ 22.12.2025:

ะะฑัะตะต:
ะัะตะณะพ ะทะฐะฟัะพัะพะฒ: 15
ะะฐะบัััะพ: 12

ะะพ ะฟัะธะพัะธัะตัะฐะผ:
๐ด ะกัะพัะฝะพ: 2
๐ ะััะพะบะธะน: 5
๐ข ะะฑััะฝัะน: 7
โช ะะธะทะบะธะน: 1

ะขะพะฟ ัะตะผ:
1. IT / ะะ: 6
2. ะฃัะตะฑะฐ: 5
3. ะกะฟัะฐะฒะบะธ: 4

SLA ะผะตััะธะบะธ:
ะกัะตะดะฝะตะต ะฒัะตะผั ะพัะฒะตัะฐ: 45 ะผะธะฝ
ะกัะตะดะฝัั ะพัะตะฝะบะฐ: 4.3/5 โญโญโญโญ (10 ะพัะตะฝะพะบ)
```

### ะััะปะตะถะธะฒะฐะตะผัะต ะผะตััะธะบะธ

| ะะตััะธะบะฐ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| **ะัะตะผั ะฟะตัะฒะพะณะพ ะพัะฒะตัะฐ** | ะะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะพัะฒะตัะต ะฐะดะผะธะฝะธัััะฐัะพัะฐ |
| **ะะฐัะฟัะตะดะตะปะตะฝะธะต ะฟะพ ะฟัะธะพัะธัะตัะฐะผ** | ะกะบะพะปัะบะพ ะทะฐัะฒะพะบ ะบะฐะถะดะพะณะพ ััะพะฒะฝั |
| **ะขะพะฟ ะบะฐัะตะณะพัะธะน** | ะกะฐะผัะต ะฟะพะฟัะปััะฝัะต ัะตะผั ะพะฑัะฐัะตะฝะธะน |
| **ะกัะตะดะฝะธะน ัะตะนัะธะฝะณ** | ะัะตะฝะบะฐ ะบะฐัะตััะฒะฐ ะพั ัััะดะตะฝัะพะฒ |
| **ะะพะปะธัะตััะฒะพ ะทะฐะบััััั** | ะกะบะพะปัะบะพ ะทะฐัะฒะพะบ ัะตัะตะฝะพ ะทะฐ ะดะตะฝั |

---

## ๐ ะะฐะทะฐ ะดะฐะฝะฝัั ะธ ะผะธะณัะฐัะธะธ

### ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะฑะฐะทั ะดะฐะฝะฝัั

| ะะฐะทะฐ ะดะฐะฝะฝัั | ะัะฐะนะฒะตั | ะะตะบะพะผะตะฝะดะฐัะธั |
|-------------|---------|--------------|
| **SQLite** | aiosqlite | ะะปั ัะฐะทัะฐะฑะพัะบะธ ะธ ะฝะตะฑะพะปััะธั ะฝะฐะณััะทะพะบ |
| **PostgreSQL** | asyncpg | ะะปั ะฟัะพะดะฐะบัะตะฝะฐ ะธ ะฒััะพะบะธั ะฝะฐะณััะทะพะบ |

### ะะพะดะตะปะธ ะดะฐะฝะฝัั

```python
# ะัะฝะพะฒะฝัะต ะผะพะดะตะปะธ
User          # ะะพะปัะทะพะฒะฐัะตะปะธ (ัััะดะตะฝัั, ะผะพะดะตัะฐัะพัั, ะฐะดะผะธะฝั)
Ticket        # ะะฐัะฒะบะธ ั ะฟัะธะพัะธัะตัะฐะผะธ, SLA, ัะตะนัะธะฝะณะฐะผะธ
Message       # ะกะพะพะฑัะตะฝะธั ะฒ ัะธะบะตัะฐั (ัะตะบัั, ัะพัะพ, ะดะพะบัะผะตะฝัั)
Category      # ะะฐัะตะณะพัะธะธ ะทะฐัะฒะพะบ
FAQ           # ะะฐะทะฐ ะทะฝะฐะฝะธะน ะดะปั ะฐะฒัะพะพัะฒะตัะพะฒ
DailyTicketCounter  # ะัะพะผะฐัะฝัะน ััะตััะธะบ daily_id
```

### ะะธะณัะฐัะธะธ ั Alembic

ะัะพะตะบั ะธัะฟะพะปัะทัะตั Alembic ะดะปั ัะฟัะฐะฒะปะตะฝะธั ััะตะผะพะน ะะ:

```bash
# ะัะธะผะตะฝะธัั ะฒัะต ะผะธะณัะฐัะธะธ
alembic upgrade head

# ะกะพะทะดะฐัั ะฝะพะฒัั ะผะธะณัะฐัะธั
alembic revision --autogenerate -m "Add new field"

# ะะพัะผะพััะตัั ัะตะบัััั ะฒะตััะธั
alembic current

# ะัะบะฐัะธัั ะฝะฐ ะพะดะฝั ะฒะตััะธั ะฝะฐะทะฐะด
alembic downgrade -1
```

> ๐ **ะะพะดัะพะฑะฝะตะต:** [ALEMBIC_GUIDE.md](ALEMBIC_GUIDE.md)

### PostgreSQL (ะัะพะดะฐะบัะตะฝ)

ะะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั PostgreSQL:

1. ะะฐะฟัััะธัะต PostgreSQL (Docker ะธะปะธ ัััะฐะฝะพะฒะปะตะฝะฝัะน):
```bash
docker run -d --name postgres \
  -e POSTGRES_USER=helpdesk \
  -e POSTGRES_PASSWORD=your_password \
  -e POSTGRES_DB=helpdesk \
  -p 5432:5432 \
  postgres:16-alpine
```

2. ะฃััะฐะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั:
```bash
DATABASE_URL=postgresql+asyncpg://helpdesk:your_password@localhost:5432/helpdesk
```

3. ะะปะธ ะธัะฟะพะปัะทัะนัะต ะณะพัะพะฒัะน docker-compose:
```bash
docker-compose -f docker-compose.postgres.yml up -d
```

### ะััะฝะฐั ะผะธะณัะฐัะธั (legacy)

ะะปั ัะพะฒะผะตััะธะผะพััะธ ัะพััะฐะฝะตะฝ ัะบัะธะฟั ะผะธะณัะฐัะธะธ:

```bash
python migrate_university_improvements.py
```

---

## ๐ฑ Telegram Mini App

ะะพั ะฟะพะดะดะตัะถะธะฒะฐะตั Telegram Mini App ะดะปั ะฟัะพัะผะพััะฐ ะทะฐัะฒะพะบ ัะตัะตะท ะฒะตะฑ-ะธะฝัะตััะตะนั.

### ะะฐัััะพะนะบะฐ

1. ะะฐะทะฒะตัะฝะธัะต ะฒะตะฑ-ัะตัะฒะตั (ัะผ. docker-compose.yml)
2. ะะฐัััะพะนัะต HTTPS (ััะตะฑัะตััั ะดะปั Mini App)
3. ะฃััะฐะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:
```ini
WEBAPP_URL=https://your-domain.com
WEBAPP_PORT=8080
```

4. ะะฐัะตะณะธัััะธััะนัะต Mini App ะฒ @BotFather:
   - ะัะฟัะฐะฒััะต `/newapp`
   - ะฃะบะฐะถะธัะต URL: `https://your-domain.com/webapp/tickets`

### ะคัะฝะบัะธะธ Mini App

- ๐ ะัะพัะผะพัั ัะฟะธัะบะฐ ะทะฐัะฒะพะบ
- ๐ ะะตัะฐะปะธ ะทะฐัะฒะบะธ ั ะธััะพัะธะตะน ัะพะพะฑัะตะฝะธะน
- โญ ะัะพะฑัะฐะถะตะฝะธะต ัะตะนัะธะฝะณะฐ ะธ ัะตะทัะผะต
- ๐จ ะะดะฐะฟัะธะฒะฝัะน ะธะฝัะตััะตะนั ะฟะพะด ัะตะผั Telegram

---

## ๐งช ะะฐะทัะฐะฑะพัะบะฐ ะธ ัะตััะธัะพะฒะฐะฝะธะต

### ะฃััะฐะฝะพะฒะบะฐ ะดะปั ัะฐะทัะฐะฑะพัะบะธ

```bash
# ะะปะพะฝะธัะพะฒะฐะฝะธะต
git clone https://github.com/Sin7009/helpdesk-bot.git
cd helpdesk-bot

# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน (ะฒะบะปััะฐั dev)
uv sync --all-extras --dev

# ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั
cp .env.example .env
```

### ๐ ะกัะฐัะธััะธะบะฐ ัะตััะธัะพะฒะฐะฝะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           ะขะตััะพะฒะพะต ะฟะพะบัััะธะต ะฟัะพะตะบัะฐ                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ  ะัะตะณะพ ัะตััะพะฒ:              295+                         โ
โ  ะะพะบัััะธะต ะบะพะดะฐ:              >88%                        โ
โ  ะกััะพะบ ะบะพะดะฐ ะฒ ัะตััะฐั:        7419                        โ
โ  ะัะตะผั ะฒัะฟะพะปะฝะตะฝะธั:           ~15-20 ัะตะบัะฝะด               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะขะธะฟั ัะตััะพะฒ

| ะะฐัะตะณะพัะธั | ะะพะปะธัะตััะฒะพ | ะคะฐะนะปั | ะะฟะธัะฐะฝะธะต |
|-----------|------------|-------|----------|
| ๐น **ะฎะฝะธั-ัะตััั** | ~150 | test_services.py, test_repositories.py | ะขะตััะธัะพะฒะฐะฝะธะต ะพัะดะตะปัะฝัั ััะฝะบัะธะน |
| ๐ท **ะะฝัะตะณัะฐัะธะพะฝะฝัะต** | ~80 | test_integration_full_workflow.py | ะขะตััะธัะพะฒะฐะฝะธะต ะฒะทะฐะธะผะพะดะตะนััะฒะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ |
| โก **ะกััะตัั-ัะตััั** | ~30 | test_stress_webapp.py, test_race_condition.py | ะัะพะฒะตัะบะฐ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ |
| ๐ **ะะตะทะพะฟะฐัะฝะพััั** | ~20 | test_security_sanitization.py | XSS, SQL injection, ะฒะฐะปะธะดะฐัะธั |
| ๐ **WebApp** | ~15 | test_webapp.py | ะขะตััะธัะพะฒะฐะฝะธะต Mini App |

### ะะฐะฟััะบ ัะตััะพะฒ

```bash
# ะัะต ัะตััั
uv run pytest

# ะก ะฟะพะดัะพะฑะฝัะผ ะฒัะฒะพะดะพะผ
uv run pytest -v

# ะก ะฟะพะบัััะธะตะผ ะบะพะดะฐ
uv run pytest --cov=. --cov-report=term-missing

# ะะพะฝะบัะตัะฝัะน ัะฐะนะป
uv run pytest tests/test_services.py -v

# ะคะธะปััั ะฟะพ ะธะผะตะฝะธ
uv run pytest -k "test_ticket"

# ะะฐัะฐะปะปะตะปัะฝัะน ะทะฐะฟััะบ (ะฑััััะตะต)
uv run pytest -n auto
```

### ๐ฏ ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั

**ะขะตัั ะฟะพะปะฝะพะณะพ ัะธะบะปะฐ ัะฐะฑะพัั:**

```python
# test_integration_full_workflow.py::test_complete_ticket_lifecycle

1. ะกััะดะตะฝั ัะพะทะดะฐะตั ัะธะบะตั โ "ะกะะะงะะ! ะะต ะผะพะณั ะฒะพะนัะธ ะฒ ะปะธัะฝัะน ะบะฐะฑะธะฝะตั"
   โ ะัะธะพัะธัะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัััะฐะฝะพะฒะปะตะฝ ะบะฐะบ URGENT
   โ ะฃะฒะตะดะพะผะปะตะฝะธะต ะพัะฟัะฐะฒะปะตะฝะพ ะฒ ะณััะฟะฟั ะฟะพะดะดะตัะถะบะธ

2. ะะดะผะธะฝะธัััะฐัะพั ะพัะฒะตัะฐะตั โ "ะัะพะฒะตัััะต ะปะพะณะธะฝ ะธ ะฟะฐัะพะปั"
   โ SLA ะผะตััะธะบะฐ (first_response_at) ะทะฐัะธะบัะธัะพะฒะฐะฝะฐ
   โ ะกัะฐััั ะธะทะผะตะฝะตะฝ ะฝะฐ IN_PROGRESS

3. ะะธะฐะปะพะณ ะฟัะพะดะพะปะถะฐะตััั โ ัััะดะตะฝั ััะพัะฝัะตั ะฟัะพะฑะปะตะผั
   โ ะัะต ัะพะพะฑัะตะฝะธั ัะพััะฐะฝะตะฝั ะฒ ะะ
   โ ะฃะฒะตะดะพะผะปะตะฝะธั ะพัะฟัะฐะฒะปะตะฝั ะพะฑะตะธะผ ััะพัะพะฝะฐะผ

4. ะะดะผะธะฝะธัััะฐัะพั ะทะฐะบััะฒะฐะตั ัะธะบะตั
   โ AI ะณะตะฝะตัะธััะตั ัะตะทัะผะต ะดะธะฐะปะพะณะฐ
   โ ะกััะดะตะฝั ะฟะพะปััะฐะตั ะทะฐะฟัะพั ะฝะฐ ะพัะตะฝะบั

5. ะกััะดะตะฝั ััะฐะฒะธั ะพัะตะฝะบั โ 5 ะทะฒะตะทะด + ะบะพะผะผะตะฝัะฐัะธะน
   โ ะะตะนัะธะฝะณ ัะพััะฐะฝะตะฝ
   โ ะขะธะบะตั ะฟะพะปะฝะพัััั ะทะฐะบััั
```

### ๐๏ธ ะกััะตัั-ัะตััั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

**ะะพะฝะบััะตะฝัะฝะพะต ัะพะทะดะฐะฝะธะต ัะธะบะตัะพะฒ:**

```bash
pytest tests/test_integration_full_workflow.py::TestConcurrencyAndRaceConditions -v

# ะะตะทัะปััะฐัั:
โ 50 ัะธะบะตัะพะฒ ัะพะทะดะฐะฝั ะฟะฐัะฐะปะปะตะปัะฝะพ ะทะฐ 2.5 ัะตะบัะฝะดั
โ ะัะต daily_id ัะฝะธะบะฐะปัะฝั (ะฝะตั ะบะพะปะปะธะทะธะน)
โ 0 ะพัะธะฑะพะบ, 100% ััะฟะตัะฝัั ะพะฟะตัะฐัะธะน
```

**WebApp ะฟะพะด ะฝะฐะณััะทะบะพะน:**

```bash
pytest tests/test_stress_webapp.py::TestWebAppStress -v

# ะะตะทัะปััะฐัั:
โ 200 ะทะฐะฟัะพัะพะฒ /health โ ะฒัะต 200 OK (< 10ms ะบะฐะถะดัะน)
โ 50 ะฟะฐัะฐะปะปะตะปัะฝัั /api/tickets โ ะฒัะต ััะฟะตัะฝั
โ 30 ะพะดะฝะพะฒัะตะผะตะฝะฝัั /api/tickets/{id} โ >83% ััะฟะตั
```

### CI/CD Pipeline

GitHub Actions ะฐะฒัะพะผะฐัะธัะตัะบะธ:

- โ ะะฐะฟััะบะฐะตั ะฒัะต ัะตััั ะฟัะธ push/PR
- โ ะัะพะฒะตััะตั ะฟะพะบัััะธะต ะบะพะดะฐ
- โ ะะตะฝะตัะธััะตั ะพััะตัั ะพ ะฟะพะบัััะธะธ (Codecov)
- โ ะััะธััะตั ะทะฐะฒะธัะธะผะพััะธ uv
- โ ะกะพะฑะธัะฐะตั ะธ ะฟัะฑะปะธะบัะตั Docker ะพะฑัะฐะท (GHCR)
- โ ะะพะดะฟะธััะฒะฐะตั ะพะฑัะฐะทั ั ะฟะพะผะพััั Sigstore/Cosign

### ะกัััะบัััะฐ ัะตััะพะฒ

```
tests/
โโโ conftest.py                          # ะะฑัะธะต ัะธะบััััั (mock_bot, session ะธ ะดั.)
โโโ ๐น ะฎะฝะธั-ัะตััั
โ   โโโ test_services.py                 # ะขะตััั ะฑะธะทะฝะตั-ะปะพะณะธะบะธ
โ   โโโ test_repositories.py             # ะขะตััั ัะปะพั ะดะฐะฝะฝัั
โ   โโโ test_handlers.py                 # ะขะตััั ะพะฑัะฐะฑะพััะธะบะพะฒ Telegram
โ   โโโ test_admin_handlers.py           # ะขะตััั ะฐะดะผะธะฝัะบะธั ะบะพะผะฐะฝะด
โโโ ๐ท ะะฝัะตะณัะฐัะธะพะฝะฝัะต ัะตััั
โ   โโโ test_integration_full_workflow.py # โญ ะะพะปะฝัะน ัะธะบะป ัะฐะฑะพัั
โ   โโโ test_university_improvements.py   # ะฃะฝะธะฒะตััะธัะตััะบะธะต ััะฝะบัะธะธ
โ   โโโ test_llm_service.py              # AI/LLM ะธะฝัะตะณัะฐัะธั
โโโ โก ะกััะตัั-ัะตััั
โ   โโโ test_stress_webapp.py            # โญ ะกััะตัั-ัะตััั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั
โ   โโโ test_race_condition.py           # Race conditions
โ   โโโ test_daily_id_optimization.py    # ะัะพะผะฐัะฝะพััั ััะตััะธะบะพะฒ
โโโ ๐ ะขะตััั ะฑะตะทะพะฟะฐัะฝะพััะธ
โ   โโโ test_security_sanitization.py    # HTML escape, XSS
โ   โโโ test_input_validation.py         # ะะฐะปะธะดะฐัะธั ะฒะฒะพะดะฐ
โโโ ๐ WebApp ัะตััั
    โโโ test_webapp.py                   # ะะฐะทะพะฒัะต ัะตััั API
    โโโ test_webapp_admin.py             # ะะดะผะธะฝัะบะฐั ะฟะฐะฝะตะปั

ะัะตะณะพ: 30+ ัะฐะนะปะพะฒ, 295+ ัะตััะพะฒ, 7419 ัััะพะบ ะบะพะดะฐ
```

> ๐ **ะะพะดัะพะฑะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั:** ะกะผ. [TESTING.md](TESTING.md) ะดะปั ะฟะพะปะฝะพะณะพ ััะบะพะฒะพะดััะฒะฐ ะฟะพ ัะตััะธัะพะฒะฐะฝะธั

---

## โก ะกััะตัั-ัะตััะธัะพะฒะฐะฝะธะต

ะะพั ะฒะบะปััะฐะตั **ะบะพะผะฟะปะตะบัะฝะพะต ัััะตัั-ัะตััะธัะพะฒะฐะฝะธะต** ะดะปั ะฟัะพะฒะตัะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะธ ััะฐะฑะธะปัะฝะพััะธ.

### ๐ ะงัะพ ัะตััะธััะตััั

#### 1. ะะพะปะฝัะน ัะธะบะป ัะฐะฑะพัั ั ัะธะบะตัะพะผ

```
ะกััะดะตะฝั โ ะกะพะทะดะฐะฝะธะต ัะธะบะตัะฐ โ ะะดะผะธะฝะธัััะฐัะพั ะพัะฒะตัะฐะตั โ
ะะธะฐะปะพะณ โ ะะฐะบัััะธะต โ AI-ัะตะทัะผะต โ ะัะตะฝะบะฐ ะบะฐัะตััะฒะฐ
```

**ะขะตัั:** `test_complete_ticket_lifecycle`
- โ ะกะพะทะดะฐะฝะธะต ัะธะบะตัะฐ ั ะพะฟัะตะดะตะปะตะฝะธะตะผ ะฟัะธะพัะธัะตัะฐ
- โ SLA ะผะตััะธะบะฐ (ะฟะตัะฒัะน ะพัะฒะตั)
- โ ะะตะฝะตัะฐัะธั AI-ัะตะทัะผะต
- โ ะกะธััะตะผะฐ ะพัะตะฝะพะบ

#### 2. ะะพะฝะบััะตะฝัะฝะฐั ะฝะฐะณััะทะบะฐ

```
50 ะฟะพะปัะทะพะฒะฐัะตะปะตะน โ ะพะดะฝะพะฒัะตะผะตะฝะฝะพะต ัะพะทะดะฐะฝะธะต ัะธะบะตัะพะฒ โ
ะฟัะพะฒะตัะบะฐ ัะฝะธะบะฐะปัะฝะพััะธ daily_id
```

**ะขะตััั:**
- `test_concurrent_ticket_creation` - 50 ะฟะฐัะฐะปะปะตะปัะฝัั ัะธะบะตัะพะฒ
- `test_high_load_message_processing` - 100 ัะพะพะฑัะตะฝะธะน ะฒ ะพะดะฝะพะผ ัะธะบะตัะต
- `test_multiple_users_concurrent_tickets` - 10 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะพะดะฝะพะฒัะตะผะตะฝะฝะพ

**ะะตะทัะปััะฐัั:**
- โ ะัะต daily_id ัะฝะธะบะฐะปัะฝั
- โ ะะตั race conditions
- โ 100% ััะฟะตัะฝัั ะพะฟะตัะฐัะธะน

#### 3. WebApp API ัััะตัั-ัะตััั

```
200 ะพะดะฝะพะฒัะตะผะตะฝะฝัั ะทะฐะฟัะพัะพะฒ โ /health, /api/tickets โ
ะฟัะพะฒะตัะบะฐ ััะฐะฑะธะปัะฝะพััะธ
```

**ะขะตััั:**
- `test_concurrent_api_requests` - 50 API ะทะฐะฟัะพัะพะฒ
- `test_high_traffic_health_check` - 200 ะทะฐะฟัะพัะพะฒ health check
- `test_concurrent_mixed_operations` - ัะผะตัะฐะฝะฝัะต ะพะฟะตัะฐัะธะธ

**ะะตััะธะบะธ:**
| ะะฟะตัะฐัะธั | ะะฐะณััะทะบะฐ | ะะตะทัะปััะฐั |
|----------|----------|-----------|
| ะกะพะทะดะฐะฝะธะต ัะธะบะตัะฐ | 50 ะฟะฐัะฐะปะปะตะปัะฝัั | โ 100% ััะฟะตั |
| API /tickets | 50 ะทะฐะฟัะพัะพะฒ | โ 100% ััะฟะตั |
| Health check | 200 ะทะฐะฟัะพัะพะฒ | โ 100% ััะฟะตั |
| ะะตัะฐะปะธ ัะธะบะตัะฐ | 30 ะทะฐะฟัะพัะพะฒ | โ >83% ััะฟะตั |

### ๐ ะขะตััั ะฑะตะทะพะฟะฐัะฝะพััะธ

- **HTML Escape** - ะทะฐัะธัะฐ ะพั XSS ะฐัะฐะบ
- **SQL Injection** - ะฟะฐัะฐะผะตััะธะทะพะฒะฐะฝะฝัะต ะทะฐะฟัะพัั
- **Input Validation** - ะฟัะพะฒะตัะบะฐ ะดะปะธะฝั ะธ ัะพัะผะฐัะฐ
- **Access Control** - ะฟัะพะฒะตัะบะฐ ะฟัะฐะฒ ะดะพัััะฟะฐ

### ๐ ะะฐะฟััะบ ัััะตัั-ัะตััะพะฒ

```bash
# ะัะต ัััะตัั-ัะตััั
pytest tests/test_stress_webapp.py tests/test_integration_full_workflow.py -v

# ะขะพะปัะบะพ ะบะพะฝะบััะตะฝัะฝะพััั
pytest -k "concurrent" -v

# ะก ะฟะพะบัััะธะตะผ
pytest tests/test_integration_full_workflow.py --cov=services --cov=handlers
```

### ๐ ะะตะทัะปััะฐัั

```
===================== test session starts ======================
collected 295 items / 265 deselected / 30 selected

tests/test_integration_full_workflow.py::TestFullTicketWorkflow::test_complete_ticket_lifecycle PASSED
tests/test_integration_full_workflow.py::TestFullTicketWorkflow::test_multiple_users_concurrent_tickets PASSED
tests/test_integration_full_workflow.py::TestConcurrencyAndRaceConditions::test_concurrent_ticket_creation PASSED
tests/test_stress_webapp.py::TestWebAppStress::test_concurrent_api_requests PASSED
tests/test_stress_webapp.py::TestWebAppStress::test_high_traffic_health_check PASSED

==================== 30 passed in 12.5s =======================
```

> ๐ **ะะพะดัะพะฑะฝะตะต:** ะกะผ. [TESTING.md](TESTING.md) ะดะปั ะฟะพะปะฝะพะณะพ ััะบะพะฒะพะดััะฒะฐ ะฟะพ ัะตััะธัะพะฒะฐะฝะธั

---

## ๐ณ Docker ะธ ะดะตะฟะปะพะน

### Docker ะพะฑัะฐะท

ะะฑัะฐะท ะฟัะฑะปะธะบัะตััั ะฒ GitHub Container Registry:

```bash
docker pull ghcr.io/sin7009/helpdesk-bot:latest
```

### docker-compose.yml

```yaml
services:
  bot:
    build: .
    container_name: helpdesk_bot
    restart: always
    env_file:
      - .env
    volumes:
      - ./data:/app/data  # ะะตััะธััะตะฝัะฝะพััั ะะ
    environment:
      - DB_NAME=/app/data/support.db
```

### ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
docker-compose up -d --build

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f

# ะััะฐะฝะพะฒะบะฐ
docker-compose down

# ะัะพะด ะฒ ะบะพะฝัะตะนะฝะตั
docker-compose exec bot bash

# ะะตัะตะทะฐะฟััะบ
docker-compose restart
```

### Systemd ัะตัะฒะธั

ะะปั ะทะฐะฟััะบะฐ ะฑะตะท Docker (bare metal):

```bash
sudo cp support-bot.service /etc/systemd/system/
sudo systemctl enable support-bot
sudo systemctl start support-bot
```

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

### HTML Injection Prevention

ะัะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะต ะดะฐะฝะฝัะต ัะบัะฐะฝะธัััััั ั ะฟะพะผะพััั `html.escape()`:

```python
import html

# โ ะะะะะะะฌะะ
await bot.send_message(
    chat_id=chat_id,
    text=f"<b>ะกะพะพะฑัะตะฝะธะต:</b> {html.escape(user_text)}",
    parse_mode="HTML"
)
```

### ะะฐัะธัะฐ ะพั ะฐัะฐะบ

- โ **HTML escape** ะดะปั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ะดะฐะฝะฝัั
- โ **ะะฐะปะธะดะฐัะธั ะฒะฒะพะดะฐ** (ะบััั 1-6, ัะตะนัะธะฝะณ 1-5, ะดะปะธะฝะฐ ัะตะบััะฐ)
- โ **ะัะพะฒะตัะบะฐ ะฟัะฐะฒ ะดะพัััะฟะฐ** ะดะปั ะฐะดะผะธะฝัะบะธั ะบะพะผะฐะฝะด
- โ **ะัะพะฒะตัะบะฐ ะฒะปะฐะดะตะปััะฐ** ะฟัะธ ะพัะตะฝะบะต ัะธะบะตัะพะฒ
- โ **ะะพะณะธัะพะฒะฐะฝะธะต ะพัะธะฑะพะบ** ะฒะผะตััะพ `except: pass`
- โ **ะะณัะฐะฝะธัะตะฝะธะต ะดะปะธะฝั** ัะพะพะฑัะตะฝะธะน (10000 ัะธะผะฒะพะปะพะฒ)

### ะะตะบะพะผะตะฝะดะฐัะธะธ

1. **ะะธะบะพะณะดะฐ** ะฝะต ะบะพะผะผะธัััะต `.env` ัะฐะนะป
2. ะัะฟะพะปัะทัะนัะต **ัะปะพะถะฝัะต ัะพะบะตะฝั** ะดะปั ะฑะพัะฐ
3. ะะณัะฐะฝะธัััะต ะดะพัััะฟ ะบ **ะณััะฟะฟะต ะฟะพะดะดะตัะถะบะธ**
4. ะะตะณัะปััะฝะพ **ะพะฑะฝะพะฒะปัะนัะต ะทะฐะฒะธัะธะผะพััะธ**

---

## โ FAQ ะธ Troubleshooting

### ะงะฐัััะต ะฟัะพะฑะปะตะผั

<details>
<summary><b>โ ValidationError: Field required</b></summary>

ะกะพะทะดะฐะนัะต `.env` ัะฐะนะป ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ ั ะพะฑัะทะฐัะตะปัะฝัะผะธ ะฟะตัะตะผะตะฝะฝัะผะธ:
```ini
TG_BOT_TOKEN=your_token
TG_ADMIN_ID=123456789
TG_STAFF_CHAT_ID=-100123456789
```
</details>

<details>
<summary><b>โ MissingGreenlet error</b></summary>

ะัะฟะพะปัะทัะนัะต `selectinload` ะดะปั eager loading ัะฒัะทะตะน:
```python
stmt = select(Ticket).options(selectinload(Ticket.user))
```
</details>

<details>
<summary><b>โ Database is locked</b></summary>

SQLite ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตั concurrent writes. ะะปั ะฒััะพะบะพะน ะฝะฐะณััะทะบะธ ะธัะฟะพะปัะทัะนัะต PostgreSQL.
</details>

<details>
<summary><b>โ ะะพั ะฝะต ะพัะฒะตัะฐะตั ะฒ ะณััะฟะฟะต</b></summary>

1. ะฃะฑะตะดะธัะตัั, ััะพ ะฑะพั ะดะพะฑะฐะฒะปะตะฝ ะฒ ะณััะฟะฟั ะบะฐะบ ะฐะดะผะธะฝะธัััะฐัะพั
2. ะัะพะฒะตัััะต `TG_STAFF_CHAT_ID` ะฒ `.env`
3. ะะปั ััะฟะตัะณััะฟะฟ ID ะฝะฐัะธะฝะฐะตััั ั `-100`
</details>

<details>
<summary><b>โ LLM ัะตะทัะผะต ะฝะต ะณะตะฝะตัะธัััััั</b></summary>

1. ะัะพะฒะตัััะต `OPENROUTER_API_KEY` ะฒ `.env`
2. ะฃะฑะตะดะธัะตัั ะฒ ะฝะฐะปะธัะธะธ ะฑะฐะปะฐะฝัะฐ ะฝะฐ OpenRouter
3. ะัะพะฒะตัััะต ะปะพะณะธ ะฝะฐ ะพัะธะฑะบะธ API
</details>

---

## ๐บ Roadmap

### โ ะะตะฐะปะธะทะพะฒะฐะฝะพ

- [x] ะขะธะบะตั-ัะธััะตะผะฐ ั ะบะฐัะตะณะพัะธัะผะธ
- [x] ะกะธััะตะผะฐ ะฟัะธะพัะธัะตัะพะฒ ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ
- [x] ะัะพัะธะปั ัััะดะตะฝัะฐ (ะบััั, ะณััะฟะฟะฐ, ััะฐััั)
- [x] SLA ะผะตััะธะบะธ (ะฒัะตะผั ะฟะตัะฒะพะณะพ ะพัะฒะตัะฐ)
- [x] ะัะตะฝะบะฐ ะบะฐัะตััะฒะฐ ะพะฑัะปัะถะธะฒะฐะฝะธั
- [x] AI-ัะตะทัะผะต ะดะธะฐะปะพะณะพะฒ (Gemini)
- [x] ะะถะตะฝะตะดะตะปัะฝัะน AI-ะฐะฝะฐะปะธะท ะดะปั FAQ
- [x] ะะพะดะดะตัะถะบะฐ ัะพัะพ ะธ ะดะพะบัะผะตะฝัะพะฒ
- [x] ะะถะตะดะฝะตะฒะฝะฐั ััะฐัะธััะธะบะฐ
- [x] ะะธะณัะฐัะธะธ Alembic
- [x] Docker + GHCR ะฟัะฑะปะธะบะฐัะธั
- [x] Telegram Mini App (ะฑะฐะทะพะฒัะน ะธะฝัะตััะตะนั)
- [x] ะะฝัะตะณัะฐัะธั ั PostgreSQL
- [x] ะะพะผะฐะฝะดะฐ `/assign` ะดะปั ะฝะฐะทะฝะฐัะตะฝะธั ัะธะบะตัะพะฒ
- [x] ะะฐะฑะพัะตะต ะฒัะตะผั ะฟะพะดะดะตัะถะบะธ (ะฐะฒัะพะพัะฒะตั ะฒ ะฝะตัะฐะฑะพัะตะต ะฒัะตะผั)
- [x] ะะฐะฟะพะผะธะฝะฐะฝะธั ะพ ะฝะตะพะฑัะฐะฑะพัะฐะฝะฝัั ะทะฐัะฒะบะฐั
- [x] ะญะบัะฟะพัั ััะฐัะธััะธะบะธ ะฒ CSV/Excel

### ๐ง ะ ัะฐะทัะฐะฑะพัะบะต

- [ ] ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ (ัะฐััะธัะตะฝะฝัะน)
- [ ] ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ัะทัะบะพะฒ

### ๐ก ะะดะตะธ

- [ ] ะะฝัะตะณัะฐัะธั ั ัะฝะธะฒะตััะธัะตััะบะธะผะธ ัะธััะตะผะฐะผะธ (ะะ, ัะฐัะฟะธัะฐะฝะธะต)
- [ ] ะงะฐั-ะฑะพั ั RAG ะดะปั ะพัะฒะตัะพะฒ ะฝะฐ ะพัะฝะพะฒะต ะฑะฐะทั ะทะฝะฐะฝะธะน
- [ ] ะะพะฑะธะปัะฝะพะต ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

| ะะพะบัะผะตะฝั | ะะฟะธัะฐะฝะธะต |
|----------|----------|
| [QUICK_START.md](QUICK_START.md) | ะัััััะน ััะฐัั ะธ ะฟัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั |
| [TESTING.md](TESTING.md) | ๐งช **ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ัะตััะธัะพะฒะฐะฝะธั ะธ ัััะตัั-ัะตััะฐะผ** |
| [UNIVERSITY_IMPROVEMENTS.md](UNIVERSITY_IMPROVEMENTS.md) | ะะพะดัะพะฑะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ัะฝะธะฒะตััะธัะตััะบะธะผ ััะฝะบัะธัะผ |
| [CONTRIBUTING.md](CONTRIBUTING.md) | ะัะบะพะฒะพะดััะฒะพ ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ |
| [ALEMBIC_GUIDE.md](ALEMBIC_GUIDE.md) | ะะฐะฑะพัะฐ ั ะผะธะณัะฐัะธัะผะธ ะฑะฐะทั ะดะฐะฝะฝัั |
| [IMPROVEMENTS_SUMMARY.md](IMPROVEMENTS_SUMMARY.md) | ะัะฐัะบะพะต ัะตะทัะผะต ะฒัะตั ัะปัััะตะฝะธะน |

---

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

ะั ะฟัะธะฒะตัััะฒัะตะผ ะฒะบะปะฐะด ะฒ ะฟัะพะตะบั! ะกะผ. [CONTRIBUTING.md](CONTRIBUTING.md) ะดะปั:

- ะกัะฐะฝะดะฐััะพะฒ ะบะพะดะธัะพะฒะฐะฝะธั
- ะัะพัะตััะฐ ัะพะทะดะฐะฝะธั PR
- ะะฐัััะพะนะบะธ ะพะบััะถะตะฝะธั ะดะปั ัะฐะทัะฐะฑะพัะบะธ
- ะะฐะฟะธัะฐะฝะธั ัะตััะพะฒ

---

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะผ. ัะฐะนะป [LICENSE](LICENSE) ะดะปั ะดะตัะฐะปะตะน.

---

<div align="center">

**ะกะดะตะปะฐะฝะพ ั โค๏ธ ะดะปั ัะฝะธะฒะตััะธัะตัะพะฒ**

[โฌ๏ธ ะะตัะฝััััั ะฝะฐะฒะตัั](#-telegram-support-bot)

</div>
