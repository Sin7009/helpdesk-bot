<div align="center">
  
# üéì Telegram Support Bot

[![CI Status](https://github.com/Sin7009/helpdesk-bot/workflows/CI/badge.svg)](https://github.com/Sin7009/helpdesk-bot/actions)
[![Docker](https://github.com/Sin7009/helpdesk-bot/workflows/Docker/badge.svg)](https://github.com/Sin7009/helpdesk-bot/pkgs/container/helpdesk-bot)
[![Python 3.12](https://img.shields.io/badge/python-3.12-blue.svg)](https://www.python.org/downloads/release/python-3120/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![codecov](https://codecov.io/gh/Sin7009/helpdesk-bot/branch/main/graph/badge.svg)](https://codecov.io/gh/Sin7009/helpdesk-bot)

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π**

[üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç) ‚Ä¢ [üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ) ‚Ä¢ [ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç](CONTRIBUTING.md)

</div>

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#Ô∏è-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [üìÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [üéØ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](#-–∫–æ–º–∞–Ω–¥—ã-–±–æ—Ç–∞)
- [üéì –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤](#-—Ñ—É–Ω–∫—Ü–∏–∏-–¥–ª—è-—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤)
- [ü§ñ AI/LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#-aillm-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- [üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏](#-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞-–∏-–º–µ—Ç—Ä–∏–∫–∏)
- [üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏](#-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö-–∏-–º–∏–≥—Ä–∞—Ü–∏–∏)
- [üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [üê≥ Docker –∏ –¥–µ–ø–ª–æ–π](#-docker-–∏-–¥–µ–ø–ª–æ–π)
- [üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [‚ùì FAQ –∏ Troubleshooting](#-faq-–∏-troubleshooting)
- [üó∫ Roadmap](#-roadmap)
- [üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

---

## üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üìù **–¢–∏–∫–µ—Ç-—Å–∏—Å—Ç–µ–º–∞** | –°–æ–∑–¥–∞–Ω–∏–µ, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ ID |
| üóÇ **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** | –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–£—á–µ–±–∞, IT, –û–±—â–µ–∂–∏—Ç–∏–µ –∏ –¥—Ä.) |
| üí¨ **–î–∏–∞–ª–æ–≥–∏** | –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —á–∞—Ç –º–µ–∂–¥—É —Å—Ç—É–¥–µ–Ω—Ç–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π |
| üìé **–ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã** | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∑–∞—è–≤–∫–∞—Ö |
| üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** | –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ |
| üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | Real-time –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ |

### –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üî¥ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º |
| üë§ **–ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞** | –ö—É—Ä—Å, –≥—Ä—É–ø–ø–∞, —Ñ–∞–∫—É–ª—å—Ç–µ—Ç, —Å—Ç–∞—Ç—É—Å —Å—Ç–∞—Ä–æ—Å—Ç—ã |
| ‚è± **SLA –º–µ—Ç—Ä–∏–∫–∏** | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ |
| ‚≠ê **–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞** | –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ 1-5 –∑–≤–µ–∑–¥ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è |
| üìà **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, SLA, —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ |

### AI/LLM –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üìã **–ê–≤—Ç–æ-—Ä–µ–∑—é–º–µ** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ –∏—Ç–æ–≥–∞ –¥–∏–∞–ª–æ–≥–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–∏–∫–µ—Ç–∞ |
| üß† **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤** | –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π AI-–∞–Ω–∞–ª–∏–∑ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è FAQ |
| üí° **–£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏** | FAQ-—Å–∏—Å—Ç–µ–º–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ |

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

<table>
<tr>
<td><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong></td>
<td><strong>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è</strong></td>
<td><strong>–í–µ—Ä—Å–∏—è</strong></td>
</tr>
<tr><td>üêç –Ø–∑—ã–∫</td><td><a href="https://python.org">Python</a></td><td>3.12</td></tr>
<tr><td>ü§ñ Telegram API</td><td><a href="https://github.com/aiogram/aiogram">aiogram</a></td><td>3.22+</td></tr>
<tr><td>üóÑ ORM</td><td><a href="https://sqlalchemy.org">SQLAlchemy</a></td><td>2.0 (Async)</td></tr>
<tr><td>üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</td><td><a href="https://sqlite.org">SQLite</a> / <a href="https://www.postgresql.org">PostgreSQL</a></td><td>16+</td></tr>
<tr><td>üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏</td><td><a href="https://alembic.sqlalchemy.org">Alembic</a></td><td>1.17+</td></tr>
<tr><td>‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</td><td><a href="https://docs.pydantic.dev/latest/concepts/pydantic_settings/">Pydantic Settings</a></td><td>2.12+</td></tr>
<tr><td>‚è∞ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫</td><td><a href="https://apscheduler.readthedocs.io">APScheduler</a></td><td>3.11+</td></tr>
<tr><td>ü§ñ LLM</td><td><a href="https://openrouter.ai">OpenRouter API</a> (Gemini Flash)</td><td>-</td></tr>
<tr><td>üì± Mini App</td><td><a href="https://docs.aiohttp.org">aiohttp</a></td><td>3.9+</td></tr>
<tr><td>üì¶ –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤</td><td><a href="https://github.com/astral-sh/uv">uv</a></td><td>latest</td></tr>
<tr><td>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</td><td><a href="https://pytest.org">pytest</a> + pytest-asyncio</td><td>9.0+</td></tr>
<tr><td>üê≥ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è</td><td><a href="https://docker.com">Docker</a> + Docker Compose</td><td>-</td></tr>
<tr><td>üîÑ CI/CD</td><td><a href="https://github.com/features/actions">GitHub Actions</a></td><td>-</td></tr>
</table>

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Sin7009/helpdesk-bot.git
cd helpdesk-bot
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª (–ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ —É [@BotFather](https://t.me/BotFather)):

```ini
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
TG_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_—Ç–µ–ª–µ–≥—Ä–∞–º
TG_ADMIN_ID=123456789           # –í–∞—à Telegram ID
TG_STAFF_CHAT_ID=-100123456789  # ID –≥—Ä—É–ø–ø—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
OPENROUTER_API_KEY=sk-or-v1-... # –î–ª—è AI-—Ñ—É–Ω–∫—Ü–∏–π (—Ä–µ–∑—é–º–µ, –∞–Ω–∞–ª–∏–∑)
LLM_MODEL_NAME=google/gemini-3-flash-preview
DB_NAME=/app/data/support.db    # –ü—É—Ç—å –∫ –ë–î (–¥–ª—è Docker)
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫

#### üê≥ –í–∞—Ä–∏–∞–Ω—Ç A: Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
docker-compose up -d --build
```

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
```bash
docker-compose logs -f
```

#### üêç –í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–æ —Å uv (–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ uv (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -LsSf https://astral.sh/uv/install.sh | sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
uv sync --all-extras --dev

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python main.py
```

#### üêç –í–∞—Ä–∏–∞–Ω—Ç C: –õ–æ–∫–∞–ª—å–Ω–æ —Å pip

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3.12 -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install .

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python main.py
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|--------------|----------|--------|
| `TG_BOT_TOKEN` | ‚úÖ | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather | `123456:ABC-DEF...` |
| `TG_ADMIN_ID` | ‚úÖ | Telegram ID –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | `123456789` |
| `TG_STAFF_CHAT_ID` | ‚úÖ | ID –≥—Ä—É–ø–ø—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ | `-100123456789` |
| `DB_NAME` | ‚ùå | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLite) | `/app/data/support.db` |
| `DATABASE_URL` | ‚ùå | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL | `postgresql+asyncpg://user:pass@host:5432/db` |
| `OPENROUTER_API_KEY` | ‚ùå | API –∫–ª—é—á OpenRouter –¥–ª—è LLM | `sk-or-v1-...` |
| `LLM_MODEL_NAME` | ‚ùå | –ú–æ–¥–µ–ª—å LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | `google/gemini-3-flash-preview` |
| `SUPPORT_HOURS_START` | ‚ùå | –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (—á–∞—Å—ã) | `9` |
| `SUPPORT_HOURS_END` | ‚ùå | –ö–æ–Ω–µ—Ü —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è (—á–∞—Å—ã) | `18` |
| `SUPPORT_TIMEZONE` | ‚ùå | –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ | `Europe/Moscow` |
| `ENABLE_WORKING_HOURS` | ‚ùå | –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ | `True` |
| `STALE_TICKET_HOURS` | ‚ùå | –ß–∞—Å–æ–≤ –¥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞—è–≤–∫–µ | `4` |
| `REMINDER_INTERVAL_MINUTES` | ‚ùå | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ä—ã—Ö –∑–∞—è–≤–æ–∫ | `60` |
| `WEBAPP_HOST` | ‚ùå | –•–æ—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Mini App | `0.0.0.0` |
| `WEBAPP_PORT` | ‚ùå | –ü–æ—Ä—Ç –¥–ª—è Mini App —Å–µ—Ä–≤–µ—Ä–∞ | `8080` |
| `WEBAPP_URL` | ‚ùå | URL Mini App –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤ –±–æ—Ç–µ | `https://your-domain.com` |

> **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `DATABASE_URL`, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ `DB_NAME`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É SQLite –∏ PostgreSQL.

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID —á–∞—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram
2. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ [@RawDataBot](https://t.me/RawDataBot) –≤ –≥—Ä—É–ø–ø—É
3. –û–Ω –ø–æ–∫–∞–∂–µ—Ç `chat_id` –≥—Ä—É–ø–ø—ã (–¥–ª—è —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100`)
4. –£–¥–∞–ª–∏—Ç–µ @RawDataBot –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞

---

## üìÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
helpdesk-bot/
‚îú‚îÄ‚îÄ üìÅ core/                    # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.py              # Pydantic Settings –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ constants.py           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ logger.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üìÅ database/                # –°–ª–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ models.py              # SQLAlchemy 2.0 –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ setup.py               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î –∏ —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ repositories/       # –ü–∞—Ç—Ç–µ—Ä–Ω Repository
‚îÇ       ‚îú‚îÄ‚îÄ base.py            # –ë–∞–∑–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ user_repository.py
‚îÇ       ‚îú‚îÄ‚îÄ ticket_repository.py
‚îÇ       ‚îî‚îÄ‚îÄ category_repository.py
‚îÇ
‚îú‚îÄ‚îÄ üìÅ handlers/                # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ telegram.py            # –•–µ–Ω–¥–ª–µ—Ä—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ admin.py               # –•–µ–Ω–¥–ª–µ—Ä—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ üìÅ services/                # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ ticket_service.py      # –õ–æ–≥–∏–∫–∞ —Ç–∏–∫–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ user_service.py        # –õ–æ–≥–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ faq_service.py         # FAQ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
‚îÇ   ‚îú‚îÄ‚îÄ priority_service.py    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ llm_service.py         # AI/LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py           # APScheduler –∑–∞–¥–∞—á–∏
‚îÇ
‚îú‚îÄ‚îÄ üìÅ middlewares/             # Middleware aiogram
‚îÇ   ‚îî‚îÄ‚îÄ db.py                  # –ò–Ω—ä–µ–∫—Ü–∏—è —Å–µ—Å—Å–∏–∏ –ë–î
‚îÇ
‚îú‚îÄ‚îÄ üìÅ alembic/                 # –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
‚îÇ   ‚îú‚îÄ‚îÄ env.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ versions/           # –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ
‚îú‚îÄ‚îÄ üìÅ tests/                   # –¢–µ—Å—Ç—ã pytest (70+ —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py            # –§–∏–∫—Å—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_services.py
‚îÇ   ‚îú‚îÄ‚îÄ test_handlers.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ üìÑ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ üìÑ pyproject.toml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ üìÑ docker-compose.yml       # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ Dockerfile               # Multi-stage Docker –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ üìÑ alembic.ini              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
```

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Handlers Layer                        ‚îÇ
‚îÇ         (telegram.py, admin.py - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    Services Layer                        ‚îÇ
‚îÇ   (ticket_service, user_service, llm_service –∏ –¥—Ä.)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                   Repository Layer                       ‚îÇ
‚îÇ    (user_repository, ticket_repository –∏ –¥—Ä.)           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    Models Layer                          ‚îÇ
‚îÇ        (SQLAlchemy models - User, Ticket, etc.)         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                    Database Layer                        ‚îÇ
‚îÇ              (SQLite + aiosqlite, Alembic)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### üë®‚Äçüéì –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/start` | –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—ã–±–æ—Ä —Ç–µ–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è |
| `/myprofile` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å (–∫—É—Ä—Å, –≥—Ä—É–ø–ø–∞, —Ñ–∞–∫—É–ª—å—Ç–µ—Ç) |
| `/updateprofile` | –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–æ—Ñ–∏–ª—è |

### üë®‚Äçüíº –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `/reply ID —Ç–µ–∫—Å—Ç` | –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∑–∞—è–≤–∫—É –ø–æ ID |
| `/close ID` | –ó–∞–∫—Ä—ã—Ç—å –∑–∞—è–≤–∫—É (—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ä–µ–∑—é–º–µ) |
| `/assign ID @user` | –ù–∞–∑–Ω–∞—á–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–∞ —Ç–∏–∫–µ—Ç |
| `/export [–¥–Ω–∏]` | –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV |
| `/add_category –Ω–∞–∑–≤–∞–Ω–∏–µ` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é |

> **üí° –°–æ–≤–µ—Ç:** –í–º–µ—Å—Ç–æ –∫–æ–º–∞–Ω–¥ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ (Reply) ‚Äî —ç—Ç–æ —Å–∞–º—ã–π —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±!

### üñ± –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

- **üìÇ –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** ‚Äî –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã (–£—á–µ–±–∞, IT, –°–ø—Ä–∞–≤–∫–∏, –û–±—â–µ–∂–∏—Ç–∏–µ)
- **‚ùì FAQ** ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç—ã–º –≤–æ–ø—Ä–æ—Å–∞–º
- **üìã –ú–æ–∏ –∑–∞—è–≤–∫–∏** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π
- **‚≠ê –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞** ‚Äî –∫–Ω–æ–ø–∫–∏ 1-5 –∑–≤–µ–∑–¥ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞—è–≤–∫–∏

---

## üéì –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤

### üî¥ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞—è–≤–∫–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –≠–º–æ–¥–∑–∏ | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ |
|-----------|--------|----------------|
| **–°—Ä–æ—á–Ω–æ** | üî¥ | —Å—Ä–æ—á–Ω–æ, —ç–∫–∑–∞–º–µ–Ω, –∑–∞–≤—Ç—Ä–∞, —Å–µ–≥–æ–¥–Ω—è, –Ω–µ –º–æ–≥—É –≤–æ–π—Ç–∏, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, —Å–µ—Å—Å–∏—è, –æ—Ç—á–∏—Å–ª–µ–Ω–∏–µ |
| **–í—ã—Å–æ–∫–∏–π** | üü† | –≤–∞–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏, –æ—à–∏–±–∫–∞ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏, –¥–∏–ø–ª–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞, deadline |
| **–û–±—ã—á–Ω—ã–π** | üü¢ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö |
| **–ù–∏–∑–∫–∏–π** | ‚ö™ | –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç, —Ö–æ—Ç–µ–ª –±—ã —É–∑–Ω–∞—Ç—å, –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å, –ø–æ–¥—Å–∫–∞–∂–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ |

**–ü—Ä–∏–º–µ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
```
–°—Ç—É–¥–µ–Ω—Ç: "–°–†–û–ß–ù–û! –ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –∑–∞–≤—Ç—Ä–∞ —ç–∫–∑–∞–º–µ–Ω!"

–ë–æ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç: üî¥ –°–†–û–ß–ù–û (–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: "—Å—Ä–æ—á–Ω–æ", "–∑–∞–≤—Ç—Ä–∞", "—ç–∫–∑–∞–º–µ–Ω")
```

### üë§ –ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –±–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ç—É–¥–µ–Ω—Ç–µ:

1. **–ö—É—Ä—Å** (1-6) ‚Äî –≤—ã–±–æ—Ä –∫–Ω–æ–ø–∫–∞–º–∏
2. **–ì—Ä—É–ø–ø–∞** ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–í–¢-201)
3. **–°—Ç–∞—Ç—É—Å** ‚Äî —Å—Ç—É–¥–µ–Ω—Ç –∏–ª–∏ —Å—Ç–∞—Ä–æ—Å—Ç–∞

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –∫–∞–∂–¥–æ–π –∑–∞—è–≤–∫–µ:
```
üî¥ –ù–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å ‚Ññ5 (ID: #123)
üë§ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
üìã ‚≠ê –°–¢–ê–†–û–°–¢–ê | 3 –∫—É—Ä—Å | –ì—Ä—É–ø–ø–∞ –ò–í–¢-201 | –§–ò–¢
–¢–µ–º–∞: IT | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–æ—á–Ω–æ
–¢–µ–∫—Å—Ç: –ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç...
```

### ‚≠ê –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∑–∞—è–≤–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ü–µ–Ω–∫—É:

```
‚úÖ –í–∞—à –≤–æ–ø—Ä–æ—Å —Ä–µ—à–µ–Ω. –î–∏–∞–ª–æ–≥ –∑–∞–∫—Ä—ã—Ç.

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ü–µ–Ω–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–º–æ—â–∏:
[‚≠ê] [‚≠ê‚≠ê] [‚≠ê‚≠ê‚≠ê] [‚≠ê‚≠ê‚≠ê‚≠ê] [‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê]
```

- –û—Ü–µ–Ω–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ü—Ä–∏ –Ω–∏–∑–∫–æ–π –æ—Ü–µ–Ω–∫–µ (1-2) –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–º –æ—Ç—á–µ—Ç–µ

---

## ü§ñ AI/LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [OpenRouter API](https://openrouter.ai) –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å LLM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Google Gemini Flash).

### üìã –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Ç–∏–∫–µ—Ç–∞ LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:

```
üìã –ò—Ç–æ–≥:
–°—Ç—É–¥–µ–Ω—Ç –æ–±—Ä–∞—Ç–∏–ª—Å—è —Å –ø—Ä–æ–±–ª–µ–º–æ–π –≤—Ö–æ–¥–∞ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç. 
–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –∏—Å—Ç–µ–∫—à–µ–º —Å—Ä–æ–∫–µ –ø–∞—Ä–æ–ª—è. 
–í—ã—Å–ª–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –¥–æ—Å—Ç—É–ø–∞.
```

### üß† –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤

–ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 20:00 LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã–µ —Ç–∏–∫–µ—Ç—ã –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è FAQ:

```
üß† –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π AI-–∞–Ω–∞–ª–∏–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Ç–∏–∫–µ—Ç–æ–≤: 47

–ü—Ä–æ–±–ª–µ–º–∞: –í—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (12 —Å–ª—É—á–∞–µ–≤)
–†–µ—à–µ–Ω–∏–µ: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email
–ö–æ–º–∞–Ω–¥–∞: /add_faq "–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" "–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞..."
```

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM

```ini
# .env
OPENROUTER_API_KEY=sk-or-v1-–≤–∞—à_–∫–ª—é—á
LLM_MODEL_NAME=google/gemini-3-flash-preview  # –∏–ª–∏ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å
```

> **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** LLM-—Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã. –ë–µ–∑ API –∫–ª—é—á–∞ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ, –Ω–æ –±–µ–∑ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∑—é–º–µ –∏ –∞–Ω–∞–ª–∏–∑–∞.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç (23:59)

–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:

```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 22.12.2025:

–û–±—â–µ–µ:
–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 15
–ó–∞–∫—Ä—ã—Ç–æ: 12

–ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:
üî¥ –°—Ä–æ—á–Ω–æ: 2
üü† –í—ã—Å–æ–∫–∏–π: 5
üü¢ –û–±—ã—á–Ω—ã–π: 7
‚ö™ –ù–∏–∑–∫–∏–π: 1

–¢–æ–ø —Ç–µ–º:
1. IT / –õ–ö: 6
2. –£—á–µ–±–∞: 5
3. –°–ø—Ä–∞–≤–∫–∏: 4

SLA –º–µ—Ç—Ä–∏–∫–∏:
–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 45 –º–∏–Ω
–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: 4.3/5 ‚≠ê‚≠ê‚≠ê‚≠ê (10 –æ—Ü–µ–Ω–æ–∫)
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **–í—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º** | –°–∫–æ–ª—å–∫–æ –∑–∞—è–≤–æ–∫ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è |
| **–¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π** | –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–º—ã –æ–±—Ä–∞—â–µ–Ω–∏–π |
| **–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥** | –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö** | –°–∫–æ–ª—å–∫–æ –∑–∞—è–≤–æ–∫ —Ä–µ—à–µ–Ω–æ –∑–∞ –¥–µ–Ω—å |

---

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –î—Ä–∞–π–≤–µ—Ä | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------------|---------|--------------|
| **SQLite** | aiosqlite | –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –Ω–µ–±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ |
| **PostgreSQL** | asyncpg | –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ |

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏
User          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å—Ç—É–¥–µ–Ω—Ç—ã, –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã, –∞–¥–º–∏–Ω—ã)
Ticket        # –ó–∞—è–≤–∫–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏, SLA, —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
Message       # –°–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–∏–∫–µ—Ç–∞—Ö (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
Category      # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞—è–≤–æ–∫
FAQ           # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–æ–≤
DailyTicketCounter  # –ê—Ç–æ–º–∞—Ä–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ daily_id
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å Alembic

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Alembic –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –ë–î:

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "Add new field"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
alembic current

# –û—Ç–∫–∞—Ç–∏—Ç—å –Ω–∞ –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –Ω–∞–∑–∞–¥
alembic downgrade -1
```

> üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [ALEMBIC_GUIDE.md](ALEMBIC_GUIDE.md)

### PostgreSQL (–ü—Ä–æ–¥–∞–∫—à–µ–Ω)

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PostgreSQL:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL (Docker –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π):
```bash
docker run -d --name postgres \
  -e POSTGRES_USER=helpdesk \
  -e POSTGRES_PASSWORD=your_password \
  -e POSTGRES_DB=helpdesk \
  -p 5432:5432 \
  postgres:16-alpine
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
DATABASE_URL=postgresql+asyncpg://helpdesk:your_password@localhost:5432/helpdesk
```

3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π docker-compose:
```bash
docker-compose -f docker-compose.postgres.yml up -d
```

### –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (legacy)

–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
python migrate_university_improvements.py
```

---

## üì± Telegram Mini App

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Telegram Mini App –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (—Å–º. docker-compose.yml)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è Mini App)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```ini
WEBAPP_URL=https://your-domain.com
WEBAPP_PORT=8080
```

4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ Mini App –≤ @BotFather:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newapp`
   - –£–∫–∞–∂–∏—Ç–µ URL: `https://your-domain.com/webapp/tickets`

### –§—É–Ω–∫—Ü–∏–∏ Mini App

- üìÇ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫
- üîç –î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚≠ê –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏ —Ä–µ–∑—é–º–µ
- üé® –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥ —Ç–µ–º—É Telegram

---

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone https://github.com/Sin7009/helpdesk-bot.git
cd helpdesk-bot

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤–∫–ª—é—á–∞—è dev)
uv sync --all-extras --dev

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
uv run pytest

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
uv run pytest -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
uv run pytest --cov=. --cov-report=term-missing

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
uv run pytest tests/test_services.py -v

# –§–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏
uv run pytest -k "test_ticket"
```

### CI/CD Pipeline

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ push/PR
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ (Codecov)
- ‚úÖ –ö—ç—à–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ uv
- ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç –∏ –ø—É–±–ª–∏–∫—É–µ—Ç Docker –æ–±—Ä–∞–∑ (GHCR)
- ‚úÖ –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—Ä–∞–∑—ã —Å –ø–æ–º–æ—â—å—é Sigstore/Cosign

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ conftest.py                  # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ test_services.py             # –¢–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ test_handlers.py             # –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚îú‚îÄ‚îÄ test_admin_handlers.py       # –¢–µ—Å—Ç—ã –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ test_university_improvements.py  # –¢–µ—Å—Ç—ã —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
‚îú‚îÄ‚îÄ test_llm_service.py          # –¢–µ—Å—Ç—ã LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ test_security_sanitization.py    # –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ ...                          # 70+ —Ç–µ—Å—Ç–æ–≤
```

---

## üê≥ Docker –∏ –¥–µ–ø–ª–æ–π

### Docker –æ–±—Ä–∞–∑

–û–±—Ä–∞–∑ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ GitHub Container Registry:

```bash
docker pull ghcr.io/sin7009/helpdesk-bot:latest
```

### docker-compose.yml

```yaml
services:
  bot:
    build: .
    container_name: helpdesk_bot
    restart: always
    env_file:
      - .env
    volumes:
      - ./data:/app/data  # –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ë–î
    environment:
      - DB_NAME=/app/data/support.db
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up -d --build

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec bot bash

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart
```

### Systemd —Å–µ—Ä–≤–∏—Å

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –±–µ–∑ Docker (bare metal):

```bash
sudo cp support-bot.service /etc/systemd/system/
sudo systemctl enable support-bot
sudo systemctl start support-bot
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### HTML Injection Prevention

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `html.escape()`:

```python
import html

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
await bot.send_message(
    chat_id=chat_id,
    text=f"<b>–°–æ–æ–±—â–µ–Ω–∏–µ:</b> {html.escape(user_text)}",
    parse_mode="HTML"
)
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

- ‚úÖ **HTML escape** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞** (–∫—É—Ä—Å 1-6, —Ä–µ–π—Ç–∏–Ω–≥ 1-5, –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞)
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞** –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ —Ç–∏–∫–µ—Ç–æ–≤
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** –≤–º–µ—Å—Ç–æ `except: pass`
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã** —Å–æ–æ–±—â–µ–Ω–∏–π (10000 —Å–∏–º–≤–æ–ª–æ–≤)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Å–ª–æ–∂–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã** –¥–ª—è –±–æ—Ç–∞
3. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ **–≥—Ä—É–ø–ø–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏**
4. –†–µ–≥—É–ª—è—Ä–Ω–æ **–æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

---

## ‚ùì FAQ –∏ Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

<details>
<summary><b>‚ùå ValidationError: Field required</b></summary>

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
```ini
TG_BOT_TOKEN=your_token
TG_ADMIN_ID=123456789
TG_STAFF_CHAT_ID=-100123456789
```
</details>

<details>
<summary><b>‚ùå MissingGreenlet error</b></summary>

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `selectinload` –¥–ª—è eager loading —Å–≤—è–∑–µ–π:
```python
stmt = select(Ticket).options(selectinload(Ticket.user))
```
</details>

<details>
<summary><b>‚ùå Database is locked</b></summary>

SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç concurrent writes. –î–ª—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL.
</details>

<details>
<summary><b>‚ùå –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–µ</b></summary>

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TG_STAFF_CHAT_ID` –≤ `.env`
3. –î–ª—è —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø ID –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100`
</details>

<details>
<summary><b>‚ùå LLM —Ä–µ–∑—é–º–µ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è</b></summary>

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `OPENROUTER_API_KEY` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ OpenRouter
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ API
</details>

---

## üó∫ Roadmap

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- [x] –¢–∏–∫–µ—Ç-—Å–∏—Å—Ç–µ–º–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- [x] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- [x] –ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ (–∫—É—Ä—Å, –≥—Ä—É–ø–ø–∞, —Å—Ç–∞—Ç—É—Å)
- [x] SLA –º–µ—Ç—Ä–∏–∫–∏ (–≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞)
- [x] –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- [x] AI-—Ä–µ–∑—é–º–µ –¥–∏–∞–ª–æ–≥–æ–≤ (Gemini)
- [x] –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π AI-–∞–Ω–∞–ª–∏–∑ –¥–ª—è FAQ
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [x] –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
- [x] Docker + GHCR –ø—É–±–ª–∏–∫–∞—Ü–∏—è
- [x] Telegram Mini App (–±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostgreSQL

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- [ ] –ö–æ–º–∞–Ω–¥–∞ `/assign` –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤
- [ ] –†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–∞–≤—Ç–æ–æ—Ç–≤–µ—Ç –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è)
- [ ] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞—è–≤–∫–∞—Ö
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV/Excel
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤

### üí° –ò–¥–µ–∏

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–õ–ö, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ)
- [ ] –ß–∞—Ç-–±–æ—Ç —Å RAG –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| [QUICK_START.md](QUICK_START.md) | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
| [UNIVERSITY_IMPROVEMENTS.md](UNIVERSITY_IMPROVEMENTS.md) | –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º |
| [CONTRIBUTING.md](CONTRIBUTING.md) | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |
| [ALEMBIC_GUIDE.md](ALEMBIC_GUIDE.md) | –†–∞–±–æ—Ç–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| [IMPROVEMENTS_SUMMARY.md](IMPROVEMENTS_SUMMARY.md) | –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π |

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! –°–º. [CONTRIBUTING.md](CONTRIBUTING.md) –¥–ª—è:

- –°—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è PR
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ù–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

<div align="center">

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤**

[‚¨ÜÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–≤–µ—Ä—Ö](#-telegram-support-bot)

</div>

